[script]
n0=;#############################################################################################################################
n1=;                    !ПРОСЬБА: НЕ ТРОГАЙТЕ НИЧЕГО НЕ ЗНАКОМОГО ВАМ РУКАМИ ИНАЧЕ ОНО СЛОМАЕТСЯ :)
n2=;#############################################################################################################################
n3=;
n4=;                                                                     R E M O T E      S C R I P T S    6
n5=;
n6=;                                #     #     #     #     #     #     #     #     #     #     #     #     #     #     #     #     #     # 
n7=;                                       #                              NEORA TrioN Various scripts                                #
n8=;                                              #                 Copyright 1999-2001 NEORA Group                    #
n9=;                                                      #           trion@neora.ru     www.NEORA.ru            #
n10=;                                                              #     #     #     #     #     #     #     #    #    # 
n11=;;;;;;
n12=;===> Serv Replays dialogs
n13=;;;;;;
n14=dialog NickNotIdent {
n15=  title "ОШИБКА!"
n16=  option dbu
n17=  size -1 -1 120 45
n18=  text "Вам необходимо идентифицироваться по паролю к нику прежде чем изменять его опции.",11, 5 5 110 36, center
n19=  button "Закрыть",10, 25 30 70 10, cancel
n20=}
n21=
n22=dialog RegNickNotCompl {
n23=  title "ОШИБКА!"
n24=  option dbu
n25=  size -1 -1 100 55
n26=  text "   Вы  не  сможите  выполнить  это действие    так   как   регистрация Вашего ника ещё не закончена.         Проверьте ваш E-Mail и пройдите регистрацию ника до конца.",11, 5 5 90 36
n27=  button "Закрыть",10, 15 40 70 10, cancel
n28=}
n29=dialog FreeNickChoose {
n30=  title "Ник свободен"
n31=  option dbu
n32=  size -1 -1 100 48
n33=  text "Проверяемый Вами ник ещё не зарегистрирован в системе.",11, 5 5 90 16, center
n34=  text "Хотите зарегистрировать его?",13, 5 20 90 8, center
n35=  button "Да", 12, 10 30 38 12, ok
n36=  button "Нет",10, 52 30 38 12, cancel
n37=}
n38=on 1:dialog:FreeNickChoose:sclick:12:{ 
n39=  dialog -mn FreeNickChoose1 FreeNickChoose1
n40=  did -i nickservcenter 41 1 $did(nickservcenter,36) 
n41=}
n42=dialog FreeNickChoose1 {
n43=  title "Инфо"
n44=  option dbu
n45=  size -1 -1 100 78
n46=  text "   Заполните    пустующие    графы находящиеся    ниже,  в    разделе ''Регистрация ника''.",11, 5 5 90 22
n47=  text "   Учтите то, что e-mail должен быть вашим реальным адресом, так как на   него  позже придёт сообщение с  инструкциями   по   завершению регистрации ника.",13, 5 25 90 36
n48=  button "ОК",10, 15 62 70 12, cancel
n49=}
n50=dialog NoFreeNickChoose {
n51=  title "Ник занят"
n52=  option dbu
n53=  size -1 -1 100 48
n54=  text "Проверяемый Вами ник уже зарегистрирован в системе.",11, 5 5 90 16, center
n55=  text "Попробуйте другой.",13, 5 20 90 8, center
n56=  button "ОК",10, 15 30 70 12, cancel
n57=}
n58=dialog TempNickReg {
n59=  title "Ник зарегистрирован"
n60=  option dbu
n61=  size -1 -1 100 72
n62=  text "Ник временно зарегистрирован.",11, 5 5 90 8, center
n63=  text "  В скором  времени  вы получите письмо   на    указаный   e-mail   с инструкциями    по    завершению регистрации   ника.   Если  Вы  не выполните  инструкции  в течении 24 часов ник будет сброшен.",13, 5 14 90 40
n64=  button "ОК",10, 15 56 70 12, cancel
n65=}
n66=alias TempNReg {
n67=  write $shortfn($mircdir) $+ texts\nickserv.txt Ник зарегистрирован E-Mail отправлено
n68=}
n69=dialog DropNickReqest {
n70=  title "Запрос сброса ника"
n71=  option dbu
n72=  size -1 -1 100 58
n73=  text "Вы активизировали процесс сброса Вашего активного ника.",11, 5 5 90 16, center
n74=  text "Закройте это окно и дождитесь появления строки подтверждения, затем нажмите ''Сброс''",13, 5 20 90 21, center
n75=  button "ОК",10, 15 42 70 12, cancel
n76=}
n77=alias NickSuccessDroped {
n78=  dialog -mn DropNickSuccess DropNickSuccess
n79=  if ($read -w $+ $1 $mircdirtexts\mynick.txt == $1) { 
n80=    write -ds $+ $1 $shortfn($mircdir) $+ texts\mynick.txt 
n81=  }
n82=  unset %nick $+ $1
n83=  unset %pass $+ $1 
n84=  if (%nickservLog == 1) { 
n85=    write $shortfn($mircdir) $+ texts\nickserv.txt СБРОС РЕГИСТРАЦИИ 
n86=    write $shortfn($mircdir) $+ texts\nickserv.txt Ник: $1
n87=    write $shortfn($mircdir) $+ texts\nickserv.txt Подтверждение: $did(nickservcenter,52)
n88=    write $shortfn($mircdir) $+ texts\nickserv.txt =============================
n89=  }
n90=  did -b nickservcenter 50,52,53
n91=  did -r nickservcenter 49,52
n92=}
n93=dialog DropNickSuccess {
n94=  title "Ник сброшен"
n95=  option dbu
n96=  size -1 -1 100 38
n97=  text "Указаный ник сброшен и вместе с паролем удалён из настроек.",11, 5 5 90 28, center
n98=  button "ОК",10, 15 22 70 12, cancel
n99=}
n100=on 1:dialog:DropNickSuccess:sclick:10:{
n101=  if ($dialog(nickservcenter) == nickservcenter) {
n102=  }
n103=}
n104=dialog DropErrorIdent {
n105=  title "ОШИБКА!"
n106=  option dbu
n107=  size -1 -1 120 38
n108=  text "Вам необходимо идентифицироваться как собственник ника прежде чем сбрасывать.",11, 5 5 112 16, center
n109=  button "ОК",10, 15 22 90 12, cancel
n110=}
n111=dialog EmailChangeCompl {
n112=  title "ОШИБКА!"
n113=  option dbu
n114=  size -1 -1 120 42
n115=  text "Запрос на изменение Вашего email адреса получен. Вам отправлено письмо с инструкциями для изменения.",11, 5 5 112 21, center
n116=  button "ОК",10, 15 28 90 12, cancel
n117=}
n118=dialog PassChangeCompl {
n119=  title "Смена пароля"
n120=  option dbu
n121=  size -1 -1 100 38
n122=  text "Пароль удачно изменён. И внесён в настройки скрипта.",11, 5 5 90 16, center
n123=  button "ОК",10, 15 21 70 12, cancel
n124=}
n125=alias PassChangePro {
n126=  if (%nickservLog == 1) {
n127=    write $shortfn($mircdir) $+ texts\nickserv.txt ПАРОЛЬ ИЗМЕНЁН $date $time 
n128=    write $shortfn($mircdir) $+ texts\nickserv.txt Ник: $me 
n129=    write $shortfn($mircdir) $+ texts\nickserv.txt Новый пароль: $did(nickservcenter,81) 
n130=    write $shortfn($mircdir) $+ texts\nickserv.txt Старый пароль: $did(nickservcenter,79)
n131=    write $shortfn($mircdir) $+ texts\nickserv.txt ==========================
n132=  }
n133=  set %pass $+ $me $did(nickservcenter,81)
n134=  did -r nickservcenter 79,81 | did -i nickservcenter 79 1 [ % [ $+ pass [ $+ [ $me ] ] ] ]
n135=}
n136=dialog IncorrPassChange {
n137=  title "Смена пароля"
n138=  option dbu
n139=  size -1 -1 100 30
n140=  text "Указаный пароль не верен.",11, 5 5 90 8, center
n141=  button "ОК",10, 15 15 70 12, cancel
n142=}
n143=alias IncorrPassChange {
n144=  if (%nickservLog == 1) {
n145=    write $shortfn($mircdir) $+ texts\nickserv.txt СМЕНА ПАРОЛЯ. ПАРОЛЬ НЕ ВЕРЕН!!! $date $time 
n146=    write $shortfn($mircdir) $+ texts\nickserv.txt Ник: $me 
n147=    write $shortfn($mircdir) $+ texts\nickserv.txt Непринятый пароль: $did(nickservcenter,79)
n148=    write $shortfn($mircdir) $+ texts\nickserv.txt Пароль имеющийся в настройках: [ % [ $+ pass [ $+ [ $me ] ] ] ]
n149=    write $shortfn($mircdir) $+ texts\nickserv.txt ==========================
n150=  }
n151=}
n152=alias URLforNick {
n153=  dialog -mn URLforNickSet URLforNickSet
n154=  if ($1 != $null && $1 != 0) { did -i URLforNickSet 12 1 $strip($1) }
n155=  if ($1 == $null) { did -i URLforNickSet 12 1 URL для Вашего ника удалён }
n156=  if ($1 == 0) { did -i URLforNickSet 12 1 URL для Вашего ника не установлен. }
n157=}
n158=dialog URLforNickSet {
n159=  title "Установка URL ника"
n160=  option dbu
n161=  size -1 -1 140 35
n162=  text "Установка URL для ника:",11, 5 5 130 8, center
n163=  text "",12, 5 13 130 8, center
n164=  button "ОК",10, 15 21 110 10, cancel
n165=}
n166=alias mailChangSent {
n167=  dialog -mn MailChangReqS MailChangReqS
n168=  did -i MailChangReqS 12 1 $1
n169=}
n170=dialog MailChangReqS {
n171=  title "Информация"
n172=  option dbu
n173=  size -1 -1 140 35
n174=  text "Вы уже запросили изменение email на:",11, 5 5 130 8, center
n175=  text "",12, 5 13 130 8, center
n176=  button "ОК",10, 15 21 110 10, cancel
n177=}
n178=alias MaskBeenSet {
n179=  dialog -mn MaskBeenSet MaskBeenSet
n180=  did -i MaskBeenSet 12 1 $strip($1)
n181=  did -i nickservcenter 93 $calc($did(nickservcenter,93).lines + 1) $strip($1)
n182=  did -d nickservcenter 93 0
n183=}
n184=dialog MaskBeenSet {
n185=  title "Добавление маски"
n186=  option dbu
n187=  size -1 -1 140 35
n188=  text "Маска была добавлени к Вашему access списку:",11, 5 5 130 8, center
n189=  text "",12, 5 13 130 8, center
n190=  button "ОК",10, 15 21 110 10, cancel
n191=}
n192=alias MaskBeenRem {
n193=  dialog -mn MaskBeenRem MaskBeenRem
n194=  did -i MaskBeenRem 12 1 $strip($1)
n195=}
n196=dialog MaskBeenRem {
n197=  title "Удаление маски"
n198=  option dbu
n199=  size -1 -1 140 35
n200=  text "Маска ника удалена. Обновите список.",11, 5 5 130 8, center
n201=  text "",12, 5 13 130 8, center
n202=  button "ОК",10, 15 21 110 10, cancel
n203=}
n204=alias MaskNotFound {
n205=  dialog -mn MaskNotFound MaskNotFound
n206=  did -i MaskNotFound 12 1 $strip($1)
n207=}
n208=dialog MaskNotFound {
n209=  title "Ошибка!"
n210=  option dbu
n211=  size -1 -1 140 35
n212=  text "Маска не найдена в вашем access списке.",11, 5 5 130 8, center
n213=  text "",12, 5 13 130 8, center
n214=  button "ОК",10, 15 21 110 10, cancel
n215=}
n216=dialog MaskListCleard {
n217=  title "Очистка списка"
n218=  option dbu
n219=  size -1 -1 120 28
n220=  text "Access список для Вашего ника очищен.",11, 5 5 110 8, center
n221=  button "ОК",10, 15 16 90 10, cancel
n222=}
n223=dialog GhostYourSelf {
n224=  title "Хм..."
n225=  option dbu
n226=  size -1 -1 86 32
n227=  text "Решили убить самого себя? ;-))",10, 1 5 84 8, center
n228=  button "",11, 3 15 80 12, ok
n229=}
n230=on 1:dialog:GhostYourSelf:init:0:{
n231=  if ($colour(background) == 1) { did -i $dname 11 1 ''TrioN Ghost Killer v1.0'' }
n232=  else { did -i $dname 11 1 Ой! }
n233=}
n234=on 1:dialog:GhostYourSelf:sclick:*:{
n235=  if ($did == 11) { 
n236=    if ($dialog(nickservcenter) == nickservcenter) { dialog -c nickservcenter }
n237=    if ($colour(background) == 1) { GhostKillerStart }
n238=  }
n239=}
n240=;===== Ghost Killer v 1.0 ====== (Just do GHOST command at yourself (channel background mast be BLACK)  ;))
n241=alias GhostKillerStart {
n242=  .timerGhKillGame 0 1 GkwindowGen
n243=}
n244=alias GkwindowGen {
n245=  %GhKillx = $r(100,600)
n246=  %GhKilly = $r(100,400)
n247=  ;%GhKillx = $r(100,600)
n248=  ;%GhKilly = $r(100,400)
n249=  window -dhp +dL @ghost_killer %GhKillx %GhKilly 32 32
n250=  drawpic -c @ghost_killer -1 -1 $shortfn($mircdir) $+ pics\ghost.bmp
n251=  .timerGhKillclose -m 1 400 window -c @ghost_killer
n252=}
n253=menu @ghost_killer {
n254=  sclick:{
n255=    if ($inrect($mouse.x, $mouse.y, 0, 0, 32, 32) == $true) { 
n256=      timerGhKill* off  
n257=      .timer -m 1 100 drawpic -c @ghost_killer -1 -1 $shortfn($mircdir) $+ pics\ghostC1.bmp
n258=      .timer -m 1 200 drawpic -c @ghost_killer -1 -1 $shortfn($mircdir) $+ pics\ghostC2.bmp
n259=      .timer -m 1 400 drawpic -c @ghost_killer -1 -1 $shortfn($mircdir) $+ pics\ghostC3.bmp
n260=      .timer -m 1 700 drawpic -c @ghost_killer -1 -1 $shortfn($mircdir) $+ pics\ghostC4.bmp
n261=      .timer 1 1 drawpic -c @ghost_killer -1 -1 $shortfn($mircdir) $+ pics\ghostC5.bmp
n262=      .timer 1 3 window -c @ghost_killer 
n263=      .timer 1 3 window -dhp +dL @ghost_k_over %GhKillx %GhKilly 168 26
n264=      .timer 1 3 drawpic -c @ghost_k_over -1 -1 $shortfn($mircdir) $+ pics\ghostOver.bmp
n265=      .timer 1 5 window -c @ghost_k_over
n266=    }
n267=  }
n268=}
n269=dialog ConnectError {
n270=  title "ОШИБКА!"
n271=  option dbu
n272=  size -1 -1 130 38
n273=  text "Действие, которое Вы хотите выполнить требует ниличия соединения с сервером.",11, 5 5 120 16, center
n274=  button "ОК", 12, 15 21 100 12, ok
n275=}
n276=dialog AlreadyReg {
n277=  title "ОШИБКА!"
n278=  option dbu
n279=  size -1 -1 130 38
n280=  text "Вы не сможете зарегистрировать этот канал так как он уже зарегистрирован.",11, 5 5 120 16, center
n281=  button "ОК", 12, 15 21 100 12, ok
n282=}
n283=dialog MustBeInside {
n284=  title "ОШИБКА!"
n285=  option dbu
n286=  size -1 -1 130 38
n287=  text "Чтобы зарегистрировать канал необходимо находиться на этом канале и иметь там OP.",11, 5 5 120 16, center
n288=  button "ОК", 12, 15 21 100 12, ok
n289=}
n290=dialog ChanWereReg {
n291=  title "Регистрация канала"
n292=  option dbu
n293=  size -1 -1 130 38
n294=  text "Канал успешно зарегистрирован на сервере и настройки внесены в скрипт.",11, 5 5 120 16, center
n295=  button "ОК", 12, 15 21 100 12, ok
n296=}
n297=alias chanPreRem {
n298=  if ($read -w $+ $1 $mircdirtexts\mychan.txt == $1) { 
n299=    write -ds $+ $1 $shortfn($mircdir) $+ texts\mychan.txt 
n300=  }
n301=  unset %chan $+ $1
n302=  unset %pass $+ $1
n303=}
n304=alias ChanDropCodeWait {
n305=  dialog -mn ChanDropCodeWait ChanDropCodeWait
n306=}
n307=dialog ChanDropCodeWait {
n308=  title "Сброс регистрации канала"
n309=  option dbu
n310=  size -1 -1 130 38
n311=  text "Вы послали команду на сброс регистрации канала. Подождите ответа.",11, 5 5 120 16, center
n312=  button "ОК", 12, 15 21 100 12, ok
n313=}
n314=dialog ChanDropCodeError {
n315=  title "ОШИБКА!"
n316=  option dbu
n317=  size -1 -1 130 38
n318=  text "Вам необходимо идентифицироваться  как Founder прежде чем Вы сможете продолжить.",11, 5 5 120 16, center
n319=  button "ОК", 12, 15 21 100 12, ok
n320=}
n321=dialog ChanDropCodeDo {
n322=  title "Сброс регистрации канала"
n323=  option dbu
n324=  size -1 -1 130 38
n325=  text "Подтвердите сброс канала нажатием на ''Сброс''",11, 5 5 120 16, center
n326=  button "ОК", 12, 15 21 100 12, ok
n327=}
n328=alias ChanDropDone {
n329=  dialog -mn ChanDropDone ChanDropDone
n330=
n331=  if ($read -w $+ $1 $mircdirtexts\mychan.txt == $1) { 
n332=    write -ds $+ $1 $shortfn($mircdir) $+ texts\mychan.txt 
n333=  }
n334=  unset %chan $+ $1
n335=  unset %pass $+ $1 
n336=  if (%chanservLog == 1) { 
n337=    write $shortfn($mircdir) $+ texts\chanserv.txt  
n338=    write $shortfn($mircdir) $+ texts\chanserv.txt Канал $1 СБРОШЕН
n339=    write $shortfn($mircdir) $+ texts\chanserv.txt =============================
n340=  }
n341=}
n342=dialog ChanDropDone {
n343=  title "Сброс регистрации канала"
n344=  option dbu
n345=  size -1 -1 130 38
n346=  text "Канал сброшен из системы и удалён из настроек скрипта.",11, 5 5 120 16, center
n347=  button "ОК", 12, 15 21 100 12, ok
n348=}
n349=dialog ChanServIdentErr {
n350=  title "ОШИБКА!"
n351=  option dbu
n352=  size -1 -1 130 38
n353=  text "Для изменения настроек Вам необходимо идентифицироваться как Founder",11, 5 5 120 16, center
n354=  button "ОК", 12, 15 21 100 12, ok
n355=}
n356=dialog ChanIsNotReg {
n357=  title "ОШИБКА!"
n358=  option dbu
n359=  size -1 -1 130 38
n360=  text "Данный канал не зарегистрирован",11, 5 5 120 16, center
n361=  button "ОК", 12, 15 21 100 12, ok
n362=}
n363=alias ChanFounderChange {
n364=  dialog -mn ChanFounderChange ChanFounderChange
n365=  did -i ChanFounderChange 11 1 Канал: $strip($1)
n366=  did -i ChanFounderChange 12 2 Founder: $strip($2)
n367=}
n368=dialog ChanFounderChange {
n369=  title "Смена Founder: изменён"
n370=  option dbu
n371=  size -1 -1 130 38
n372=  text "",11, 5 5 120 8, center
n373=  text "",12, 5 13 120 8, center
n374=  button "ОК", 13, 15 21 100 12, ok
n375=}
n376=alias ChanPassChangeDone {
n377=  set %pass $+ $strip($1) $strip($2)
n378=  did -r chanservcenter 217,219
n379=  did -i chanservcenter 217 1 $strip($2)
n380=  dialog -mn ChanPassChangeDone ChanPassChangeDone
n381=  did -i ChanPassChangeDone 11 1 Канал: $strip($1)
n382=  did -i ChanPassChangeDone 12 2 Пароль: $strip($2)
n383=  write $shortfn($mircdir) $+ texts\chanserv.txt Пароль удачно ИЗМЕНЁН
n384=  write $shortfn($mircdir) $+ texts\chanserv.txt ======================
n385=}
n386=dialog ChanPassChangeDone {
n387=  title "Смена Пароля: изменён"
n388=  option dbu
n389=  size -1 -1 130 38
n390=  text "",11, 5 5 120 8, center
n391=  text "",12, 5 13 120 8, center
n392=  button "ОК", 13, 15 21 100 12, ok
n393=}
n394=dialog ChanPassChangeIncorr {
n395=  title "ОШИБКА!"
n396=  option dbu
n397=  size -1 -1 130 38
n398=  text "Пароль указаный вами не принят.",11, 5 5 120 8, center
n399=  text "Пароль не верен.",12, 5 13 120 8, center
n400=  button "ОК", 13, 15 21 100 12, ok
n401=}
n402=dialog URLhasBeenSet {
n403=  title "Установка URL"
n404=  option dbu
n405=  size -1 -1 130 38
n406=  text "URL установлен:",11, 5 5 120 8, center
n407=  text "",12, 5 13 120 8, center
n408=  button "ОК", 13, 15 21 100 12, ok
n409=}
n410=dialog URLhasBeenReset {
n411=  title "Установка URL"
n412=  option dbu
n413=  size -1 -1 130 38
n414=  text "URL канала удалён из информации о канале.",11, 5 9 120 16, center
n415=  button "ОК", 13, 15 21 100 12, ok
n416=}
n417=dialog NotHaveAccess {
n418=  title "Предупреждение."
n419=  option dbu
n420=  size -1 -1 110 38
n421=  text "У вас нет разрешения давать и снимать OP на этом канале.",11, 5 4 100 14, center
n422=  button "ОК", 13, 5 21 100 12, ok
n423=}
n424=dialog ChanDescrSetTo {
n425=  title "Просмотр Описание"
n426=  option dbu
n427=  size -1 -1 130 58
n428=  text "Текущее описание канала:",11, 5 5 120 8, center
n429=  text "",12, 5 13 120 24, center
n430=  button "ОК", 13, 15 41 100 12, ok
n431=}
n432=dialog ChanDescrHBset {
n433=  title "Изменение Описания"
n434=  option dbu
n435=  size -1 -1 130 58
n436=  text "Описание канала изменено на:",11, 5 5 120 8, center
n437=  text "",12, 5 13 120 24, center
n438=  button "ОК", 13, 15 41 100 12, ok
n439=}
n440=alias ChanListADDone {
n441=  dialog -mn ChanListADDone ChanListADDone
n442=  dialog -t ChanListADDone Добавление в $2 List
n443=  did -i ChanListADDone 11 1 В $2 List канала добавлено:
n444=  did -i ChanListADDone 12 1 $strip($1)
n445=}
n446=dialog ChanListADDone {
n447=  title "Добавление в List"
n448=  option dbu
n449=  size -1 -1 130 38
n450=  text "",11, 5 5 120 8, center
n451=  text "",12, 5 13 120 24, center
n452=  button "ОК", 13, 15 21 100 12, ok
n453=}
n454=alias ChanListADDErr {
n455=  dialog -mn ChanListADDErr ChanListADDErr
n456=  did -i ChanListADDErr 11 1 В списке $2 уже существует:
n457=  did -i ChanListADDErr 12 1 $strip($1)
n458=}
n459=dialog ChanListADDErr {
n460=  title "ОШИБКА!"
n461=  option dbu
n462=  size -1 -1 130 38
n463=  text "",11, 5 5 120 8, center
n464=  text "",12, 5 13 120 24, center
n465=  button "ОК", 13, 15 21 100 12, ok
n466=}
n467=alias ChanListAccChange {
n468=  dialog -mn ChanListAccChange ChanListAccChange
n469=  did -i ChanListAccChange 11 1 Доступ изменён с $2 на $3 $+ :
n470=  did -i ChanListAccChange 12 1 $1
n471=}
n472=dialog ChanListAccChange {
n473=  title "Изменение Access"
n474=  option dbu
n475=  size -1 -1 110 38
n476=  text "",11, 5 4 100 8, center
n477=  text "",12, 5 12 100 24, center
n478=  button "ОК", 13, 5 21 100 12, ok
n479=}
n480=alias ChanListREMone {
n481=  dialog -mn ChanListREMone ChanListREMone
n482=  dialog -t ChanListREMone Удаление из $2 List
n483=  did -i ChanListREMone 11 1 Из $2 List канала удалено:
n484=  did -i ChanListREMone 12 1 $strip($1)
n485=}
n486=dialog ChanListREMone {
n487=  title "Удаление из List"
n488=  option dbu
n489=  size -1 -1 130 38
n490=  text "",11, 5 5 120 8, center
n491=  text "",12, 5 13 120 24, center
n492=  button "ОК", 13, 15 21 100 12, ok
n493=}
n494=dialog MemoAllDel {
n495=  title "Удаление Memo"
n496=  option dbu
n497=  size -1 -1 100 33
n498=  text "Все MEMO сообщения удалены",11, 5 5 90 8, center
n499=  button "ОК", 13, 5 16 90 10, ok
n500=}
n501=dialog MemoSentUser {
n502=  title "Отправка Memo"
n503=  option dbu
n504=  size -1 -1 100 33
n505=  text "Memo успешно отправлено",11, 5 5 90 8, center
n506=  button "ОК", 13, 5 16 90 10, ok
n507=}
n508=dialog MemoMarkDel {
n509=  title "Маркировка Memo"
n510=  option dbu
n511=  size -1 -1 100 33
n512=  text "Memo отмечено как DEL",11, 5 5 90 8, center
n513=  button "ОК", 13, 5 16 90 10, ok
n514=}
n515=dialog MemoMarkUnDel {
n516=  title "Маркировка Memo"
n517=  option dbu
n518=  size -1 -1 100 33
n519=  text "Memo отмечено как unDEL",11, 5 5 90 8, center
n520=  button "ОК", 13, 5 16 90 10, ok
n521=}
n522=alias MemoDelQuont  {
n523=  dialog -mn MemoDelQ MemoDelQ 
n524=  did -i MemoDelQ 11 1 Удалено $1 Memo сообщение(й)
n525=}
n526=dialog MemoDelQ {
n527=  title "Удаление Memo"
n528=  option dbu
n529=  size -1 -1 100 33
n530=  text "",11, 5 5 90 8, center
n531=  button "ОК", 13, 5 16 90 10, ok
n532=}
n533=alias NOOPdetected {
n534=  dialog -mn NOOPdetected NOOPdetected
n535=  did -i NOOPdetected 11 1 Невозможно добавить $strip($1) в списки операторов так как у него установлена функция NOOP
n536=}
n537=dialog NOOPdetected {
n538=  title "Info"
n539=  option dbu
n540=  size -1 -1 130 45
n541=  text "",11, 5 5 120 21, center
n542=  button "ОК", 13, 15 28 100 12, ok
n543=}
n544=#ChanListsFromMenu off
n545=on *:notice:*:*:{ 
n546=  if ($nick == chanserv) { 
n547=    if ($window(@Channel_Lists) == $null) { 
n548=      window -adl @Channel_Lists 82 68 480 350 $gettok($readini $mircdirmirc.ini fonts fchannel,1,46) $gettok($readini $mircdirmirc.ini fonts fchannel,2-,46) 
n549=      aline @Channel_Lists $1-
n550=      if (AKick isin $1-) { .timer 1 10 .disable #ChanListsFromMenu }
n551=    }
n552=    else {
n553=      aline @Channel_Lists $1-
n554=      if (AKick isin $1-) { .timer 1 10 .disable #ChanListsFromMenu }
n555=    }
n556=  }
n557=}
n558=#ChanListsFromMenu end
n559=menu @Channel_Lists {
n560=  Удалить:{
n561=    var %ChanListSNum = $gettok($line(@Channel_Lists,$sline(@Channel_Lists,1).ln),1,32)
n562=    var %ChanListNum = $sline(@Channel_Lists,1).ln - %ChanListSNum
n563=    var %ChanListNum = $gettok($line(@Channel_Lists,%ChanListNum),1,32)
n564=    if (%ChanListNum == SOp) { chanserv sop $strip($gettok($line(@Channel_Lists,1),4,32)) del %ChanListSNum }
n565=    if (%ChanListNum == AOp) { chanserv aop $strip($gettok($line(@Channel_Lists,1),4,32)) del %ChanListSNum }
n566=    if (%ChanListNum == AKick) { chanserv akick $strip($gettok($line(@Channel_Lists,1),4,32)) del %ChanListSNum }
n567=    window -c @Channel_Lists
n568=
n569=  }
n570=  -
n571=  Очистить:clear @Channel_Lists
n572=  -
n573=  Закрыть: window -c @Channel_Lists
n574=}
n575=;;;;;;;
n576=;;;;
n577=;===>services down
n578=;;;;
n579=;;;;;;
n580=dialog servdown {
n581=  title "Services Down"
n582=  option dbu
n583=  size 90 90 120 25
n584=  button "Закрыть",10, 5 13 110 9, cancel
n585=  text "В настоящее время сервисы не доступны.",11, 5 4 110 8, center
n586=}
n587=dialog servdown1 {
n588=  title "Services Down"
n589=  option dbu
n590=  size -1 -1 120 35
n591=  button "Закрыть",10, 5 22 110 10, cancel
n592=  text "В настоящее время сервисы не доступны.",11, 5 4 110 8, center
n593=  text "Попробуйте повторить операцию позже",12, 5 12 110 8, center
n594=}
n595=;;;;;;;;;
n596=;;;
n597=;;; =====|>
n598=;;;
n599=;;;;;;
n600=
n601=raw 474:*:{
n602=  set %lastBanChan $2
n603=  if (%AJoinRepit == on) && (%AJRban == on) { 
n604=    if ($timer(AJBAN [ $+ [ $2 ] ] ) == $null) {
n605=      if (%ChSUnBan == on) { chanserv unban $2 }
n606=      if (%AJRtimesMode == ns) { .timerAJBAN [ $+ [ $2 ] ] 0 %AJRPeriod  join %lastBanChan }
n607=      if (%AJRtimesMode == lm) { 
n608=        if (%AJBanPre [ $+ [ $2 ] ] == $null) {
n609=          .timerAJBAN  [ $+ [ $2 ] ] %AJRTimes %AJRPeriod  join %lastBanChan
n610=          set -u [ $+ [ $calc(%AJRTimes * %AJRPeriod + 60) ] ] %AJBanPre [ $+ [ $2 ] ] CoRN
n611=        }
n612=      }
n613=    }
n614=  }
n615=  else { if (%ChSUnBan == on) { chanserv unban $2 } }
n616=}
n617=raw 473:*:{
n618=  set %lastInviteChan $2
n619=  if (%AJoinRepit == on) && (%AJRinvite == on) { 
n620=    if ($timer(AJinvite [ $+ [ $2 ] ] ) == $null) {
n621=      if (%ChSInvite == on) { chanserv invite $2 }
n622=      if (%AJRtimesMode == ns) { .timerAJinvite [ $+ [ $2 ] ] 0 %AJRPeriod  join %lastInviteChan }
n623=      if (%AJRtimesMode == lm) { 
n624=        if (%AJInvPre [ $+ [ $2 ] ] == $null) { 
n625=          .timerAJinvite  [ $+ [ $2 ] ] %AJRTimes %AJRPeriod  join %lastInviteChan 
n626=          set -u [ $+ [ $calc(%AJRTimes * %AJRPeriod + 60) ] ] %AJInvPre [ $+ [ $2 ] ] AndyBig 
n627=        }
n628=      }
n629=    }
n630=  }
n631=  else { if (%ChSInvite == on) { chanserv invite $2 } }
n632=}
n633=raw 471:*:{
n634=  if (%AJoinRepit == on) && (%AJRlimit == on) { 
n635=    if ($timer(AJlimit [ $+ [ $2 ] ] ) == $null) {
n636=      if (%AJRtimesMode == ns) { .timerAJlimit [ $+ [ $2 ] ] 0 %AJRPeriod  join $2 }
n637=      if (%AJRtimesMode == lm) { 
n638=        if (%AJLimitPre [ $+ [ $2 ] ] == $null) {
n639=          .timerAJlimit  [ $+ [ $2 ] ] %AJRTimes %AJRPeriod  join $2 
n640=          set -u [ $+ [ $calc(%AJRTimes * %AJRPeriod + 60) ] ] %AJLimitPre [ $+ [ $2 ] ] Joyraid
n641=        }
n642=      }
n643=    }
n644=  }
n645=}
n646=raw 475:*:{
n647=  if (%AJoinRepit == on) && (%AJRkey == on) {
n648=    if ($timer(AJkey [ $+ [ $2 ] ] ) == $null) {
n649=      if (%AJRtimesMode == ns) { .timerAJkey [ $+ [ $2 ] ] 0 %AJRPeriod  join $2 }
n650=      if (%AJRtimesMode == lm) { 
n651=        if (%AJKeyPre [ $+ [ $2 ] ] == $null) {
n652=          .timerAJkey  [ $+ [ $2 ] ] %AJRTimes %AJRPeriod  join $2 
n653=          set -u [ $+ [ $calc(%AJRTimes * %AJRPeriod + 60) ] ] %AJKeyPre [ $+ [ $2 ] ] NEORA
n654=        }
n655=      }
n656=    }
n657=  }
n658=}
n659=#updIALonJoin off
n660=raw 302:*:halt
n661=#updIALonJoin end
n662=raw 408:*:{
n663=  if (%reNoColMsg == on) { echo $2 Канал $2 имеет опцию +c. Коды цвета убраны. Повтор сообщения.  | msg $2 $strip($12-,c) }
n664=  else { echo $2 Невозможно послать цветное сообщение на канал $2 (+c) }
n665=}
n666=raw 440:*:{
n667=  if ($dialog(chanservcenter) == chanservcenter || $dialog(nickservcenter) == nickservcenter || $dialog(memoservcenter) == memoservcenter) {
n668=    if ($dialog(servdown1) != servdown1) dialog -mn servdown1 servdown1 | halt
n669=  }
n670=  else { if ($dialog(servdown) != servdown) dialog -mn servdown servdown | halt }
n671=}
n672=menu @Services {
n673=  Nickserv
n674=  .Main Help:/nickserv help
n675=  .-
n676=  .Register:/nickserv help register
n677=  .Set
n678=  ..Main SET Help:/nickserv help set
n679=  ..-
n680=  ..Passwd:/nickserv help  set passwd
n681=  ..Enforce:/nickserv help set enforce
n682=  ..URL:/nickserv help set url
n683=  ..NoMemo:/nickserv help set nomemo
n684=  ..NoOp:/nickserv help set noop
n685=  ..EMail:/nickserv help set email
n686=  ..ShowEMail:/nickserv help set showemail
n687=  .Access:/nickserv help access
n688=  .Identify:/nickserv help identify
n689=  .Recover:/nickserv help recover
n690=  .Ghost:/nickserv help ghost
n691=  .Drop:/nickserv help drop
n692=  .Release:/nickserv help release
n693=  .Info:/nickserv help info
n694=  .Acc:/nickserv help acc
n695=  ChanServ
n696=  .Main Help:/chanserv help
n697=  .-
n698=  .Register:/chanserv help register
n699=  .Set
n700=  ..Main SET Help:/chanserv help set
n701=  ..-
n702=  ..Founder:chanserv help set founder
n703=  ..Passwd:chanserv help set passwd
n704=  ..Desc:chanserv help set desc
n705=  ..MLock:chanserv help set mlock
n706=  ..OpGuard:chanserv help set opguard
n707=  ..KeepTopic:chanserv help set keeptopic
n708=  ..URL:chanserv help set url
n709=  ..Ident:chanserv help set ident
n710=  ..Restrict:chanserv help set restrict
n711=  ..Verbose:chanserv help set verbose
n712=  ..TopicLock:chanserv help set topiclock
n713=  ..LeaveOps:chanserv help set leaveops
n714=  ..UnSecure:chanserv help set unsecure
n715=  ..Private:chanserv help set private
n716=  ..Memo:chanserv help set memo
n717=  .SOp:chanserv help sop
n718=  .AOp:chanserv help aop
n719=  .AKick:chanserv help akick
n720=  .Drop:chanserv help drop
n721=  .Identify:chanserv help identify
n722=  .Access:chanserv help access
n723=  .Op:chanserv help Op
n724=  .DeOp:chanserv help deop
n725=  .Info:chanserv help info
n726=  .Invite:chanserv help invite
n727=  .MKick:chanserv help mkick
n728=  .MDeOp:chanserv help mdeop
n729=  .UnBan:chanserv help unban
n730=  .Count:chanserv help count
n731=  .Why:chanserv help why
n732=  MemoServ
n733=  .Main Help:memoserv help
n734=  .-
n735=  .Send:memoserv help send
n736=  .SendSOp:memoserv help sendsop
n737=  .List:memoserv help list
n738=  .Read:memoserv help read
n739=  .Del:memoserv help del
n740=  .UnDel:memoserv help undel
n741=  .Purge:memoserv help purge
n742=  .Forward:memoserv help forward
n743=  .News:memoserv help news
n744=  -
n745=  Очистить:clear @Services
n746=  Закрыть: window -c @Services
n747=}
n748=menu @Nickserv {
n749=  Main Help:/nickserv help
n750=  -
n751=  Register:/nickserv help register
n752=  Set
n753=  .Main SET Help:/nickserv help set
n754=  .-
n755=  .Passwd:/nickserv help passwd
n756=  .Enforce:/nickserv help set enforce
n757=  .URL:/nickserv help set url
n758=  .NoMemo:/nickserv help set nomemo
n759=  .NoOp:/nickserv help set noop
n760=  .EMail:/nickserv help set email
n761=  .ShowEMail:/nickserv help set showemail
n762=  Access:/nickserv help access
n763=  Identify:/nickserv help identify
n764=  Recover:/nickserv help recover
n765=  Ghost:/nickserv help ghost
n766=  Drop:/nickserv help drop
n767=  Release:/nickserv help release
n768=  Info:/nickserv help info
n769=  Acc:/nickserv help acc
n770=  -
n771=  Очистить:clear @NickServ
n772=  Закрыть: window -c @NickServ
n773=}
n774=menu @Chanserv {
n775=  ChanServ
n776=  Main Help:/chanserv help
n777=  -
n778=  Register:/chanserv help register
n779=  Set
n780=  .Main SET Help:/chanserv help set
n781=  .-
n782=  .Founder:chanserv help founder
n783=  .Passwd:chanserv help passwd
n784=  .Desc:chanserv help desc
n785=  .MLock:chanserv help mlock
n786=  .OpGuard:chanserv help opguard
n787=  .KeepTopic:chanserv help keeptopic
n788=  .URL:chanserv help url
n789=  .Ident:chanserv help ident
n790=  .Restrict:chanserv help restrict
n791=  .Verbose:chanserv help verbose
n792=  .TopicLock:chanserv help topiclock
n793=  .LeaveOps:chanserv help leaveops
n794=  .UnSecure:chanserv help unsecure
n795=  .Private:chanserv help private
n796=  .Memo:chanserv help memo
n797=  SOp:chanserv help sop
n798=  AOp:chanserv help aop
n799=  AKick:chanserv help akick
n800=  Drop:chanserv help drop
n801=  Identify:chanserv help identify
n802=  Access:chanserv help access
n803=  Op:chanserv help Op
n804=  DeOp:chanserv help deop
n805=  Info:chanserv help info
n806=  Invite:chanserv help invite
n807=  MKick:chanserv help mkick
n808=  MDeOp:chanserv help mdeop
n809=  UnBan:chanserv help unban
n810=  Count:chanserv help count
n811=  Why:chanserv help why
n812=  -
n813=  Очистить:clear @ChanServ
n814=  Закрыть: window -c @ChanServ
n815=}
n816=menu @Memoserv {
n817=  Main Help:memoserv help
n818=  -
n819=  Send:memoserv help send
n820=  SendSOp:memoserv help sendsop
n821=  List:memoserv help list
n822=  Read:memoserv help read
n823=  Del:memoserv help del
n824=  UnDel:memoserv help undel
n825=  Purge:memoserv help purge
n826=  Forward:memoserv help forward
n827=  News:memoserv help news
n828=  -
n829=  Очистить:clear @MemoServ
n830=  Закрыть: window -c @MemoServ
n831=}
n832=;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
n833=on 1:input:@k9:{
n834=  /msg K9@k9.chatnet.org $1-
n835=}
n836=;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;Log MNGer
n837=
n838=alias LogMNGer {
n839=  if ($window(@Log_Manager) == $null) { window -ak0l13S @Log_Manager $gettok($readini $mircdirmirc.ini fonts fchannel,1,46) $gettok($readini $mircdirmirc.ini fonts fchannel,2-,46) }
n840=  else { halt }
n841=  echo $colour(Info) @Log_Manager $chr(160) NEORA Trion LOG MANAGER v1.0
n842=  echo $colour(Info) @Log_Manager $chr(160) * CTRL+F - для поиска текста
n843=  echo $colour(Info) @Log_Manager $chr(160)
n844=  var %LogInd = 0
n845=  :next
n846=  inc %LogInd 1
n847=  if ($findfile($mircdirlogs,*.log,%LogInd) == $null) { titlebar @Log_Manager : Всего Log-файлов: $line(@Log_Manager,0,1) | return }
n848=  aline -l @Log_Manager $remove($nopath($findfile($mircdirlogs,*.log,%LogInd)),.log)
n849=  goto next
n850=
n851=}
n852=menu @Log_Manager {
n853=  lbclick:{ titlebar @Log_Manager : Выбран файл: (Сеть: $+ $gettok($line(@Log_Manager,$sline(@Log_Manager,1).ln,1),2,46) - Канал/Ник: $+ $gettok($line(@Log_Manager,$sline(@Log_Manager,1).ln,1),1,46) - Дата: $+ $right($gettok($line(@Log_Manager,$sline(@Log_Manager,1).ln,1),3,46),2) $+ . $+ $mid($gettok($line(@Log_Manager,$sline(@Log_Manager,1).ln,1),3,46),5,2) $+ . $+ $left($gettok($line(@Log_Manager,$sline(@Log_Manager,1).ln,1),3,46),4),$chr(32) }
n854=  $mcmenu.c($chr(32),Очистить окно):{ clear @Log_Manager }
n855=  $mcmenu.c(Инфо,$chr(32)):{
n856=    echo $colour(Info) @Log_Manager  Файл: $line(@Log_Manager,$sline(@Log_Manager,1).ln,1) $+ .log
n857=    echo $colour(Info) @Log_Manager *** Шифр имени: Сеть: $+ $gettok($line(@Log_Manager,$sline(@Log_Manager,1).ln,1),2,46) - Канал/Ник: $+ $gettok($line(@Log_Manager,$sline(@Log_Manager,1).ln,1),1,46) - Дата: $+ $right($gettok($line(@Log_Manager,$sline(@Log_Manager,1).ln,1),3,46),2) $+ . $+ $mid($gettok($line(@Log_Manager,$sline(@Log_Manager,1).ln,1),3,46),5,2) $+ . $+ $left($gettok($line(@Log_Manager,$sline(@Log_Manager,1).ln,1),3,46),4),$chr(32) 
n858=    echo $colour(Info) @Log_Manager *** Размер: $file($shortfn($logdir) $+ $line(@Log_Manager,$sline(@Log_Manager,1).ln,1) $+ .log).size байт
n859=    echo $colour(Info) @Log_Manager *** Создан: $asctime($file($shortfn($logdir) $+ $line(@Log_Manager,$sline(@Log_Manager,1).ln,1) $+ .log).ctime,dd/mm/yy HH:nn:ss)
n860=    echo $colour(Info) @Log_Manager *** Последнее изменение: $asctime($file($shortfn($logdir) $+ $line(@Log_Manager,$sline(@Log_Manager,1).ln,1) $+ .log).mtime,dd/mm/yy HH:nn:ss)
n861=    echo $colour(Info) @Log_Manager -
n862=  }
n863=  -
n864=  $mcmenu.c(Читать,$chr(32)):{  
n865=    .copy -o $shortfn($logdir) $+ $line(@Log_Manager,$sline(@Log_Manager,1).ln,1) $+ .log $shortfn($logdir) $+ LogMNGer.txt
n866=    LogReadTo
n867=  }
n868=  $mcmenu.c(Открыть,$chr(32)):{ run $shortfn($logdir) $+ $line(@Log_Manager,$sline(@Log_Manager,1).ln,1) $+ .log }
n869=  -
n870=  $mcmenu.c(Удалить,$chr(32)):{
n871=    if ($?!="Подтвердите удаление файла(ов)" == $true) {
n872=      var %LineQuont = $sline(@Log_Manager,0).ln
n873=      while (%LineQuont > 0) {
n874=        remove $shortfn($logdir) $+ $line(@Log_Manager,$sline(@Log_Manager,%LineQuont ).ln,1) $+ .log 
n875=        dline -l @Log_Manager $sline(@Log_Manager,%LineQuont ).ln
n876=        dec %LineQuont 1
n877=      }
n878=      titlebar @Log_Manager : Всего Log-файлов: $line(@Log_Manager,0,1)
n879=    }
n880=  }
n881=  -
n882=}
n883=
n884=alias LogReadTo {
n885=  var %logLines = $lines($logdirLogMNGer.txt) + 1 , %LogLineInd = 1
n886=  :next
n887=  while (%logLines > %LogLineInd) {
n888=    if ($read -l $+ %LogLineInd $logdirLogMNGer.txt == $null) { echo @Log_Manager $chr(160) | inc %LogLineInd 1 | goto next }
n889=    echo -n @Log_Manager $read($logdirLogMNGer.txt,n,%LogLineInd)
n890=    inc %LogLineInd 1
n891=  }
n892=}
