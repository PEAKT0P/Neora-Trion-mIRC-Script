[script]
n0=;#############################################################################################################################
n1=;                    !ПРОСЬБА: НЕ ТРОГАЙТЕ НИЧЕГО НЕ ЗНАКОМОГО ВАМ РУКАМИ ИНАЧЕ ОНО СЛОМАЕТСЯ :)
n2=;#############################################################################################################################
n3=;
n4=;                                                                    R E M O T E      S C R I P T S      5
n5=;
n6=;                                #     #     #     #     #     #     #     #     #     #     #     #     #     #     #     #     #     # 
n7=;                                       #                           NEORA TRION   Various Scripts                              #
n8=;                                              #                 Copyright 1999-2001 NEORA Group                    #
n9=;                                                      #           trion@neora.ru     www.NEORA.ru            #
n10=;                                                              #     #     #     #     #     #     #     #    #    #
n11=;
n12=;;;;;;;;
n13=;====> DALnet DROP Monitor
n14=;;;;;;;;
n15=dialog DALdropMntr {
n16=  title "DALnet DROP Monitor"
n17=  option dbu
n18=  size -1 -1 195 155
n19=  button "Закрыть",10, 145 144 50 10, cancel
n20=  tab "       Проверить регистрацию     ",1, 5 1 185 140
n21=  tab "           Auto DROP Monitor          ",2
n22=  text "П Р О В Е Р И Т Ь:",50, 20 20 150 7, center, tab 1
n23=  radio "Ник",51, 25 32 70 12, push, group,tab 1
n24=  radio "Канал",52, 98 32 70 12, push, autohs, tab 1
n25=  edit "",53, 42 50 110 12, center , tab 1
n26=  button "Проверить",54, 42 63 110 12, disable, tab 1
n27=  edit "",55, 25 78 140 46, read, multi, center, tab 1
n28=  button "Зарегистрировать ник",56, 26 125 69 10, hide, tab 1
n29=  button "Зарегистрировать канал",57, 26 125 69 10, hide, tab 1
n30=  button "Смотреть ещё",58, 95 125 69 10, hide, tab 1
n31=  text "      С помощью DALnet DROP-монитора Вы можете автоматически отслеживать сброс ников или каналов. Как только скрипт заметит что прописаный ниже ник или канал освободился он сообщит Вам об этом и Вы сможете зарегистрировать ник или канал на себя.",11, 10 17 175 28, tab 2
n32=  box "Проверять ники:",12, 13 45 80 92,tab 2
n33=  check "Включить",13, 18 55 40 7,tab 2
n34=  list 14, 18 65 70 43, disable, tab 2
n35=  button "Добавить",15, 18 108 35 10,tab 2
n36=  button "Удалить",16, 54 108 34 10,tab 2
n37=  combo 31, 18 122 70 100, drop, disable, tab 2
n38=  box "Проверять каналы:",17, 102 45 80 92, tab 2
n39=  check "Включить",18, 107 55 40 7,tab 2
n40=  list 19, 107 65 70 43, disable, tab 2
n41=  button "Добавить",20, 107 108 35 10,tab 2
n42=  button "Удалить",21, 143 108 34 10,tab 2
n43=  combo 32, 107 122 70 100, drop, disable, tab 2
n44=}
n45=on 1:dialog:DALdropMntr:*:*:{
n46=  if ($devent == init && $did == 0) {
n47=    DROPmntrINS DALdropMntr
n48=    did -i $dname 31,32 1 Раз в день | did -i $dname 31,32 2 Раз в два дня | did -i $dname 31,32 3 Раз в три дня | did -i $dname 31,32 4 Раз в пять дней
n49=    did -i $dname 31,32 5 Раз в неделю | did -i $dname 31,32 6 Раз в десять дней | did -i $dname 31,32 7 Раз в две недели | did -i $dname 31,32 8 Раз в три недели
n50=    did -c $dname 31 %DrMrNtimes | did -c $dname 32 %DrMrCtimes
n51=    if (%DROPmntrNICK == on) { did -c $dname 13 | did -e $dname 14,15,16,31 } | if (%DROPmntrCHAN == on) { did -c $dname 18 | did -e $dname 19,20,21,32 }
n52=  }
n53=  if ($devent == sclick) {
n54=    if ($did == 10) { .disable #RegcheckDropMntr }
n55=    if ($did == 13) { if ($did(13).state == 1) { set %DROPmntrNICK on | did -e $dname 14,15,16,31 } | else { set %DROPmntrNICK off | did -b $dname 14,15,16,31 } }
n56=    if ($did == 15) { set %DrMrlastADD nick | dialog -m DropMntrADDElnt DropMntrADDElnt | did -i DropMntrADDElnt 11 1 Ник: }
n57=    if ($did == 16) { write -dw $+ $did(14,$did(14).sel) $shortfn($mircdir) $+ texts\DROPmntrN.txt | did -r $dname 14,19 | DROPmntrINS DALdropMntr }
n58=    if ($did == 31) { 
n59=      set %DrMrNtimes $did(31).sel 
n60=      if ($did(31).sel == 1) { set %DrMrNEXTcheckN 86400 } | if ($did(31).sel == 2) { set %DrMrNEXTcheckN 172800 } | if ($did(31).sel == 3) { set %DrMrNEXTcheckN 259200 } | if ($did(31).sel == 4) { set %DrMrNEXTcheckN 432000 }
n61=      if ($did(31).sel == 5) { set %DrMrNEXTcheckN 604800 } | if ($did(31).sel == 6) { set %DrMrNEXTcheckN 864000 } | if ($did(31).sel == 7) { set %DrMrNEXTcheckN 1209600 } | if ($did(31).sel == 8) { set %DrMrNEXTcheckN 1814400 }
n62=    }
n63=    if ($did == 18) { if ($did(18).state == 1) { set %DROPmntrCHAN on | did -e $dname 19,32 } | else { set %DROPmntrCHAN off | did -b $dname 19,32 } }
n64=    if ($did == 20) { set %DrMrlastADD chan | dialog -m DropMntrADDElnt DropMntrADDElnt }
n65=    if ($did == 21) { write -dw $+ $did(19,$did(19).sel) $shortfn($mircdir) $+ texts\DROPmntrC.txt | did -r $dname 14,19 | DROPmntrINS DALdropMntr }
n66=    if ($did == 32) { 
n67=      set %DrMrCtimes $did(32).sel 
n68=      if ($did(32).sel == 1) { set %DrMrNEXTcheckC 86400 } | if ($did(32).sel == 2) { set %DrMrNEXTcheckC 172800 } | if ($did(32).sel == 3) { set %DrMrNEXTcheckC 259200 } | if ($did(32).sel == 4) { set %DrMrNEXTcheckC 432000 }
n69=      if ($did(32).sel == 5) { set %DrMrNEXTcheckC 604800 } | if ($did(32).sel == 6) { set %DrMrNEXTcheckC 864000 } | if ($did(32).sel == 7) { set %DrMrNEXTcheckC 1209600 } | if ($did(32).sel == 8) { set %DrMrNEXTcheckC 1814400 }
n70=    }
n71=    if ($did == 51) { if ($did(53) != $null) && ($chr(35) !isin $did(53)) { did -e $dname 54 } | else { did -b $dname 54 } | did -r $dname 55 | did -h $dname 56,57,58 }
n72=    if ($did == 52) { if ($did(53) != $null) && ($chr(35) isin $left($did(53),1)) { did -e $dname 54 } | else { did -b $dname 54 } | did -r $dname 55 | did -h $dname 56,57,58 }
n73=    if ($did == 54) { 
n74=      did -r $dname 55 | did -h $dname 56,57,58
n75=      if ($did(51).state == 1) { .enable #RegcheckDropMntr | nickserv info $did(53) | did -i $dname 55 1 $chr(160) | did -i $dname 55 2 Запрос послан. Ждите... }
n76=      if ($did(52).state == 1) { .enable #RegcheckDropMntr | chanserv info $did(53) | did -i $dname 55 1 $chr(160) | did -i $dname 55 2 Запрос послан. Ждите... }
n77=    }
n78=    if ($did == 56) { dialog -m nickservcenter nickservcenter | did -c nickservcenter 2 | nick $did(53) | did -i nickservcenter 41 1 $did(53) | dialog -c $dname }
n79=    if ($did == 57) { set %activchan $did(53) | dialog -mn chanservcenter chanservcenter | did -c chanservcenter 2 | join $did(53) | did -i chanservcenter 42 1 $did(53) | dialog -c $dname }
n80=    if ($did == 58) { did -r $dname 53,55 | did -h $dname 56,57,58 | did -b $dname 54 }
n81=  }
n82=  if ($devent == edit) {
n83=    if ($did == 53) {
n84=      if ($did(51).state == 1) { if ($chr(35) !isin $did(53)) { did -e $dname 54 } | else { did -b $dname 54 } | if ($did(53) == $null) { did -b $dname 54 } }
n85=      if ($did(52).state == 1) { if ($chr(35) != $left($did(53),1)) { did -b $dname 54 } | else { did -e $dname 54 } | if ($did(53) == $null) { did -b $dname 54 } }
n86=    }
n87=  }
n88=}
n89=#RegcheckDropMntr off
n90=on ^*:notice:*:*:{
n91=  if ($dialog(DALdropMntr) == DALdropMntr) {
n92=    if ($nick == nickserv) {
n93=      if (is not registered isin $1-) { did -r DALdropMntr 55 | did -i DALdropMntr 55 1 Ник: $strip($3) | did -i DALdropMntr 55 2 СВОБОДЕН | did -i DALdropMntr 55 3 Хотите зарегистрировать его? | did -v DALdropMntr  56,58 | .disable #RegcheckDropMntr }
n94=      if (Info for isin $1-2) { did -r DALdropMntr 55 | did -i DALdropMntr 55 1 Ник $strip($3) занят }
n95=      if (Last seen address : isin $1-4) { did -i DALdropMntr 55 2 Адрес: $5- } | if (Last seen time isin $1-3) { set -u60 %lastUserVisit Последний визит: $5- }
n96=      if (Time registered isin $1-2) { did -i DALdropMntr 55 3 Зарегистрирован: $4- | did -i DALdropMntr 55 4 %lastUserVisit | .disable #RegcheckDropMntr }
n97=    }
n98=    if ($nick == chanserv) {
n99=      if (is not registered isin $1-) { did -r DALdropMntr 55 | did -i DALdropMntr 55 1 Канал: $strip($3) | did -i DALdropMntr 55 2 СВОБОДЕН | did -i DALdropMntr 55 3 Хотите зарегистрировать его? | did -v DALdropMntr  57,58 | .disable #RegcheckDropMntr }
n100=      if (Info for isin $1-2) { did -r DALdropMntr 55 | did -i DALdropMntr 55 1 Канал $strip($3) занят } | if (Founder : isin $1-2) { did -i DALdropMntr 55 2 Founder: $3 }
n101=      if (Registered : isin $1-2) { did -i DALdropMntr 55 3 Зарегистрирован: $3- } | if (Last opping: isin $1-2) { did -i DALdropMntr 55 4 Последний OP: $3- }
n102=    }
n103=  }
n104=}
n105=#RegcheckDropMntr end
n106=dialog DropMntrADDElnt {
n107=  title "DALnet DROP Monitor"
n108=  option dbu
n109=  size -1 -1 120 30
n110=  button "ОК",10, 30 17 80 11, ok
n111=  text "Канал:",11, 5 6 22 7, right
n112=  edit "",12, 29 5 80 10
n113=}
n114=on 1:dialog:DropMntrADDElnt:sclick:10:{
n115=  if ($did(12) != $null) {
n116=    if (%DrMrlastADD == nick) { if ($read -w $+ $did(12) $mircdirtexts\DROPmntrN.txt != $did(12)) { write $shortfn($mircdir) $+ texts\DROPmntrN.txt $did(12) | did -i DALdropMntr 14 $calc($did(DALdropMntr,14).lines + 1) $did(12) } }
n117=    if (%DrMrlastADD == chan) { if ($read -w $+ $did(12) $mircdirtexts\DROPmntrC.txt != $did(12)) { write $shortfn($mircdir) $+ texts\DROPmntrC.txt $did(12) | did -i DALdropMntr 19 $calc($did(DALdropMntr,19).lines + 1) $did(12) } }
n118=  }
n119=}
n120=on 1:dialog:DropMntrADDElnt:edit:12:{ if ($numtok($did(12),32) > 1) did -b $dname 10 | if ($numtok($did(12),32) = 1) did -e $dname 10 }
n121=on 1:sockopen:dropmntr:{
n122=  var %varnick = $r(a,z) $+ $r(a,z) $+ $r(a,z) $+ $r(a,z) $+ $r(a,z) $+ $r(a,z) $+ $r(a,z) | var %varuser = $r(a,z) $+ $r(a,z) $+ $r(a,z) $r(a,z) $+ $r(a,z) $+ $r(a,z) $r(a,z) $+ $r(a,z) $+ $r(a,z) $+ $r(a,z)
n123=  sockwrite -n dropmntr nick %varnick | sockwrite -n dropmntr user %varnick %varuser
n124=}
n125=on 1:sockread:dropmntr:{
n126=  sockread %DrMr.tmp
n127=  if ($gettok(%DrMr.tmp,1,32) == PING) { sockwrite -n dropmntr pong $gettok(%DrMr.tmp,2,32) } | if ($gettok(%DrMr.tmp,2,32) == 376) { %lineQN = 0 | %lineQC = 0 | DROPmntr.write }
n128=  if ($gettok(%DrMr.tmp,4-5,32) == :Info for) { DROPmntr.write }
n129=  if ($gettok(%DrMr.tmp,4-5,32) == :The nick && $gettok(%DrMr.tmp,7-9,32) == is not registered.) { 
n130=    if ($dialog(DROPmntrYES) != DROPmntrYES) { dialog -m DROPmntrYES DROPmntrYES }
n131=    dialog -t DROPmntrYES NICK DROP DETECTED | did -i DROPmntrYES 11 1 $strip($gettok(%DrMr.tmp,6,32)) | DROPmntr.write 
n132=  }
n133=  if ($gettok(%DrMr.tmp,4-5,32) == :The channel && $gettok(%DrMr.tmp,7-9,32) == is not registered.) { 
n134=    if ($dialog(DROPmntrYES) != DROPmntrYES) { dialog -m DROPmntrYES DROPmntrYES }
n135=    dialog -t DROPmntrYES CHANNEL DROP DETECTED | did -i DROPmntrYES 12 1 $strip($gettok(%DrMr.tmp,6,32)) | DROPmntr.write 
n136=  }
n137=}
n138=dialog DROPmntrYES {
n139=  title "DROP"
n140=  option dbu
n141=  size -1 -1 120 60
n142=  text "Внимание сработал DROP Monitor",20, 5 5 110 7, center
n143=  text "Ник:",21, 10 15 25 7, left
n144=  text "",11, 36 15 80 7
n145=  text "Канал:",22, 10 23 25 7, left
n146=  text "",12, 36 23 80 7
n147=  button "Зарегистрировать!",23, 10 33 100 10, ok
n148=  button "Закрыть",24, 10 44 100 10, cancel
n149=}
n150=on 1:dialog:DROPmntrYES:sclick:23:{
n151=  if ($did(11) != $null) { dialog -m nickservcenter nickservcenter | did -c nickservcenter 2 | nick $did(11) | did -i nickservcenter 41 1 $did(11) }
n152=  if ($did(12) != $null) { dialog -m chanservcenter chanservcenter | did -c chanservcenter 2 | join $did(12) | did -i chanservcenter 42 1 $did(12) }
n153=}
n154=;#########################################################################################################################
n155=;;;;;;;;
n156=;====> Connect and Nickreg Wizzard dialogs
n157=;;;;;;;;
n158=dialog newUserwizard {
n159=  title "Начало пути."
n160=  option dbu
n161=  size -1 -1 160 103
n162=  button "Дальше >>>",14, 110 81 47 10, ok
n163=  button "Закрыть",10, 62 91 95 10, cancel
n164=  icon 12, 0 1 60 100, Pics\Wiz1.jpg, 1, noborder
n165=  edit "",11, 62 1 95 70, read, multi
n166=  ;check "Больше не показывать это окно",13, 62 72 95 8
n167=  button "<<< Назад",15, 62 81 48 10, disable
n168=}
n169=dialog UserWizard1 {
n170=  title "Nickname (псевдоним)"
n171=  option dbu
n172=  size -1 -1 160 103
n173=  button "Дальше >>>",14, 110 81 47 10, ok
n174=  button "Закрыть",10, 62 91 95 10, cancel
n175=  button "<<< Назад",15, 62 81 48 10
n176=  icon 12, 0 1 60 100, Pics\Wiz2.jpg, 1, noborder
n177=  box "Выбераем Nick", 20, 62 1 95 76
n178=  text "      Придумать   себе   псевдоним - задача не из лёгких :).   Во первых как это часто бывает ''все хорошие уже заняты'', а во вторых обычно людей  в  IRC  знают  по  первому их нику, какие бы хорошие ники вы потом не придумывали :). Поэтому придётся пофантазировать.", 21, 65 8 90 54
n179=  text "Идём ''Дальше''",22, 95 67 40 8
n180=}
n181=dialog UserWizard2 {
n182=  title "Nickname"
n183=  option dbu
n184=  size -1 -1 160 103
n185=  button "Дальше >>>",14, 110 81 47 10, ok
n186=  button "Закрыть",10, 62 91 95 10, cancel
n187=  button "<<< Назад",15, 62 81 48 10
n188=  icon 12, 0 1 60 100, Pics\Wiz3.jpg, 1, noborder
n189=  box "Проверка свободного ника", 20, 62 1 95 76
n190=  text "    Впишите придуманый вами ник, нажмите  ''Проверить''  и  немного подождите.",21, 65 8 90 21
n191=  text "Ник:",22, 65 30 12 8
n192=  edit "",23, 78 29 40 10, autohs
n193=  button "Проверить",24, 119 29 33 10, disable
n194=  edit "",26, 65 40 88 25, read, multi
n195=  button "Взять провереный ник",27, 65 66 88 9, disable
n196=}
n197=dialog UserWizard3a {
n198=  title "Nickname"
n199=  option dbu
n200=  size -1 -1 160 103
n201=  button "Дальше >>>",14, 110 81 47 10, ok
n202=  button "Закрыть",10, 62 91 95 10, cancel
n203=  button "<<< Назад",15, 62 81 48 10
n204=  icon 12, 0 1 60 100, Pics\Wiz4.jpg, 1, noborder
n205=  box "Выбор ника", 20, 62 1 95 76
n206=  text "  Так как провереный свободный ник по каким-то причинам небыл выбран, впишите тут любой ник. Вы сможите проверить его позже."21, 65 8 90 35
n207=  text "   Кроме того Вы можете оставить эту графу свободной и TRION сам заполнит её случайным образом.",22, 65 34 90 24
n208=  text "Ник:",23, 75 56 15 8
n209=  edit "",24, 90 55 45 10, autohs
n210=  button "Сохранить",25, 90 65 45 9, disable
n211=}
n212=dialog UserWizard4 {
n213=  title "User ID"
n214=  option dbu
n215=  size -1 -1 160 103
n216=  button "Дальше >>>",14, 110 81 47 10, ok
n217=  button "Закрыть",10, 62 91 95 10, cancel
n218=  button "<<< Назад",15, 62 81 48 10
n219=  icon 12, 0 1 60 100, Pics\Wiz5.jpg, 1, noborder
n220=  box "Выбор User ID", 20, 62 1 95 76
n221=  text "  Помимо Ника, не менее важна часть   ваших   регистрационных данных называемая User ID. Эта часть вашего адреса на сервере которая     должна     оставаться неизменной   чтобы   вас   могли опознать :). По  сути  это в какой    то мере даже важнее ника."21, 65 8 90 56
n222=  text "  Идём ''Дальше''",22, 85 65 90 8
n223=}
n224=dialog UserWizard5 {
n225=  title "User ID"
n226=  option dbu
n227=  size -1 -1 160 103
n228=  button "Дальше >>>",14, 110 81 47 10, ok
n229=  button "Закрыть",10, 62 91 95 10, cancel
n230=  button "<<< Назад",15, 62 81 48 10
n231=  icon 12, 0 1 60 100, Pics\Wiz6.jpg, 1, noborder
n232=  box "Выбор User ID", 20, 62 1 95 76
n233=  text "       Во   избежании   каких   либо проблем и в целях безопасности не  рекомендуется  использовать  в   качестве   User ID   ваше   имя пользователя  у  провайдера или логин    от    почтового    ящика, хостинга или какой либо другой службы."21, 65 8 90 56
n234=  text "User ID:",22, 65 65 20 8
n235=  edit "",23, 87 64 35 10, autohs
n236=  button "Сохранить",24, 123 64 30 10, disable
n237=}
n238=
n239=on 1:dialog:UserWizard5:edit:23:{ did -e $dname 24 | if ($did(23) == $null) { did -b $dname 24 } }
n240=on 1:dialog:UserWizard5:sclick:*:{ 
n241=  if ($did == 15) { 
n242=    dialog -mn UserWizard4 UserWizard4 
n243=    dialog -c UserWizard5 
n244=  } 
n245=  if ($did == 14) { 
n246=    if ($did(23) != $null) { .emailaddr $did(23) | .identd on | .identd $did(23) }
n247=    else { .emailaddr $me | .identd on | .identd $me }
n248=    dialog -mn UserWizard6 UserWizard6 
n249=  } 
n250=  if ($did == 24) { .emailaddr $did(23) | .identd on | identd $did(23) }
n251=}
n252=
n253=
n254=
n255=
n256=
n257=
n258=dialog UserWizard6 {
n259=  title "Name"
n260=  option dbu
n261=  size -1 -1 160 103
n262=  button "Дальше >>>",14, 110 81 47 10, ok
n263=  button "Закрыть",10, 62 91 95 10, cancel
n264=  button "<<< Назад",15, 62 81 48 10
n265=  icon 12, 0 1 60 100, Pics\Wiz7.jpg, 1, noborder
n266=  box "Name", 20, 62 1 95 76
n267=  text "      И  наконец,  Вам  необходимо ввести своё имя. Хотя это может быть всё что угодно. Может быть какая либо фраза, может URL итд.    В тех же целях безопасности не стоит указывать реальные имя и фамилию. "21, 65 8 90 56
n268=  text "Имя:",22, 65 55 15 8
n269=  edit "",23, 80 54 65 10, autohs
n270=  button "Сохранить",24, 80 65 65 9, disable
n271=}
n272=dialog UserWizard7 {
n273=  title "Connect"
n274=  option dbu
n275=  size -1 -1 160 103
n276=  button "Дальше >>>",14, 110 81 47 10, ok, disable
n277=  button "Закрыть",10, 62 91 95 10, cancel
n278=  button "<<< Назад",15, 62 81 48 10
n279=  icon 12, 0 1 60 100, Pics\Wiz8.jpg, 1, noborder
n280=  box "Соединение", 20, 62 1 95 76
n281=  text " Теперь всё готово к соединению с  сервером  и  регистрации ника.                   Соединяемся?"21, 65 18 90 24
n282=  button "Соединиться c DALnet",24, 77 40 65 9
n283=  text "   Нажмите  кнопку  ''Дальше'' как только она станет доступна.",25, 65 55 90 16
n284=}
n285=dialog UserWizard8 {
n286=  title "NickServ register"
n287=  option dbu
n288=  size -1 -1 160 103
n289=  button "Дальше >>>",14, 110 81 47 10, ok
n290=  button "Закрыть",10, 62 91 95 10, cancel
n291=  button "<<< Назад",15, 62 81 48 10, disable
n292=  icon 12, 0 1 60 100, Pics\Wiz9.jpg, 1, noborder
n293=  box "Регистрация ника", 20, 62 1 95 76
n294=  text "    Прежде чем перейти к самой регистрации ника убедитеcь, что вы проверили свой текущий ник и выяснили что он свободен. При желании можете проверить ещё раз."21, 65 8 90 42
n295=  text "Ник:",22, 65 48 11 8
n296=  edit $me,23, 77 47 40 10, autohs
n297=  button "Проверить",24, 119 47 34 10
n298=  edit "",25, 77 58 77 17, read, multi
n299=}
n300=dialog UserWizard9 {
n301=  title "NickServ register"
n302=  option dbu
n303=  size -1 -1 160 103
n304=  button "Зарегистрировать ник",14, 77 81 80 10, disable
n305=  button "Закрыть",10, 62 91 95 10, cancel
n306=  button "<<<",15, 62 81 15 10
n307=  icon 12, 0 1 60 100, Pics\Wiz9.jpg, 1, noborder
n308=  box "Регистрация ника", 20, 62 1 95 77
n309=  text "    Для регистрации ника нужно заполнить нижеследующие графы (e-mail обязательно должен быть реальный)."21, 65 8 90 42
n310=  text "Ник:",22, 80 38 11 8
n311=  edit "",23, 92 37 50 10, autohs
n312=  text "Пароль:",24, 71 50 25 8
n313=  edit "",25, 92 49 50 10, autohs
n314=  text "E-Mail:",26, 75 62 20 8
n315=  edit "",27, 92 61 50 10, autohs
n316=}
n317=dialog UserWizard10 {
n318=  title "NickServ register"
n319=  option dbu
n320=  size -1 -1 160 103
n321=  button "ОК",10, 62 91 95 10, cancel
n322=  icon 12, 0 1 60 100, Pics\Wiz9.jpg, 1, noborder
n323=  box "Регистрация ника", 20, 62 1 95 87
n324=  text "Ждём ответа от NickServ"21, 75 15 70 8
n325=  text "",22, 100 25 15 8, center
n326=  text "Ник зарезервирован за Вами!",23, 65 10 90 8, center, hide
n327=  text "    На указаный Вами E-Mail адрес выслано    письмо    содержащее инструкцию     по     завершению регистрации ника. В письме Вам будет  предложено  щёлкнуть  по  ссылке    или     ввести   команду авторизации    (AUTH),   которую нужно    скопировать   в    любую строку  ввода этой програмы.",24, 65 18 90 70, hide
n328=  text "Удачи!",25, 130 78 25 8, hide
n329=  text "Регистрация не удалась. Возможно по причине большой задержки сети.",26, 65 15 90 25, center, hide
n330=  text "Попробуйте ещё раз.",27, 65 40 90 8, center, hide
n331=  button "<<< Назад",28, 85 52 50 10, hide
n332=}
n333=on 1:dialog:newUserwizard:init:0:{
n334=  ;if (%UserWiz == off) { did -c $dname 13 }
n335=  did -i $dname 11 1 $str($chr(160),11) Приветствуем Вас! 
n336=  did -i $dname 11 2 $chr(160) Если Вы уже достаточно опытный IRC-шник и $chr(160) знакомы с сервисами DALnet можете с чистой совестью закрывать это окно и настраивать всё самостоятельно.
n337=  did -i $dname 11 7 $chr(160) Если же Вы хотите чтобы TRION помог $chr(160) Вам $chr(160) в $chr(160) подключении $chr(160) и регистрации, $chr(160) то нажмите кнопку "Дальше".
n338=}
n339=on 1:dialog:newUserwizard:sclick:*:{ 
n340=  ;if ($did == 13) { if ($did(13).state == 1) { set %UserWiz off } | else { set %UserWiz on } }
n341=  if ($did == 14) { dialog -mn UserWizard1 UserWizard1 } 
n342=}
n343=on 1:dialog:UserWizard1:sclick:*:{ 
n344=  if ($did == 15) { dialog -mn newUserwizard newUserwizard | dialog -c UserWizard1 } 
n345=  if ($did == 14) { dialog -mn UserWizard2 UserWizard2 } 
n346=}
n347=on 1:dialog:UserWizard2:edit:23:did -e $dname 24 | if ($did(23) == $null) did -b $dname 24
n348=on 1:dialog:UserWizard2:init:0:set %WizServDown on
n349=on 1:dialog:UserWizard2:sclick:*:{
n350=  if ($did == 15) { dialog -mn UserWizard1 UserWizard1 | dialog -c UserWizard2 }
n351=  if ($did == 14) { 
n352=    set -u300 %WizPath 2 | if (%WizServDown == on) { dialog -mn UserWizard3a UserWizard3a } 
n353=    else { dialog -mn UserWizard4 UserWizard4 } 
n354=  }
n355=  if ($did == 24) { 
n356=    .sockopen wizard 64.154.61.232 6667 | did -b $dname 23,24,27 | did -r $dname 26 | did -i $dname 26 1 Проверяем... 
n357=  }
n358=  if ($did == 27) { 
n359=    .nick $did(23) | .anick _ $+ $did(23) $+ _ | did -r $dname 26 
n360=    did -i $dname 26 1 Ник выбран, можем идти ''Дальше'' | unset %WizServDown 
n361=  }
n362=}
n363=on 1:dialog:UserWizard2:edit:23:did -r UserWizard2 26
n364=on 1:dialog:UserWizard3a:edit:24:{ did -e $dname 25 | if ($did(24) == $null) { did -b $dname 25 } }
n365=on 1:dialog:UserWizard3a:sclick:*:{
n366=  if ($did == 25) { nick $did(24) | .anick _ $+ $did(24) $+ _ } | if ($did == 15) { dialog -mn UserWizard2 UserWizard2 | dialog -c UserWizard3a }
n367=  if ($did == 14) { 
n368=    set -u300 %WizPath 3a 
n369=    if ($did(24) != $null) { nick $did(24) | .anick _ $+ $did(24) $+ _ }
n370=    else { WizAutoNick } 
n371=    dialog -mn UserWizard4 UserWizard4 
n372=  }
n373=}
n374=on 1:dialog:UserWizard4:sclick:*:{
n375=  if ($did == 15) { 
n376=    if (%WizPath == 2) { dialog -mn UserWizard2 UserWizard2 } 
n377=    if (%WizPath == 3a) { dialog -mn UserWizard3a UserWizard3a } 
n378=    else { dialog -mn UserWizard2 UserWizard2 } 
n379=    dialog -c UserWizard4 
n380=  }
n381=  if ($did == 14) { set -u300 %WizPath 4 | dialog -mn UserWizard5 UserWizard5 }
n382=}
n383=
n384=on 1:dialog:UserWizard6:edit:23:did -e $dname 24 | if ($did(23) == $null) did -b $dname 24
n385=on 1:dialog:UserWizard6:sclick:*:{
n386=  if ($did == 15) { dialog -mn UserWizard5 UserWizard5 | dialog -c UserWizard6 } 
n387=  if ($did == 14) {
n388=    if ($did(23) == $null) { .username NeoRa TrioN script - 12www.NEORA.ru }
n389=    else { username $did(23) }
n390=    dialog -mn UserWizard7 UserWizard7 
n391=  } 
n392=  if ($did == 24) { .username $did(23) }
n393=}
n394=
n395=on 1:dialog:UserWizard7:sclick:*:{ if ($did == 14) {  dialog -mn UserWizard8 UserWizard8 |  dialog -c UserWizard7 } | if ($did == 15) { dialog -mn UserWizard6 UserWizard6 | dialog -c UserWizard7 } | if ($did == 24) { server irc.dal.net 6667 | did -b $dname 15 } }
n396=
n397=on 1:dialog:UserWizard8:edit:23:did -r $dname 25 | did -e $dname 24 | if ($did(23) == $null) did -b $dname 24
n398=on 1:dialog:UserWizard8:sclick:*:{ if ($did == 14) {  dialog -mn UserWizard9 UserWizard9 |  .timer -m 1 500 did -i UserWizard9 23 1 $did(UserWizard8,23) | dialog -c UserWizard8 | .disable #WizNickCheck } | if ($did == 24) { .enable #WizNickCheck | nickserv info $did(23) } }
n399=
n400=on 1:dialog:UserWizard9:edit:*:{ if ($did(23) != $null) && ($did(25) != $null) && ($did(27) != $null) && (@ isin $did(27)) { did -e $dname 14 } | if (@ !isin $did(27)) { did -b $dname 14 } }
n401=on 1:dialog:UserWizard9:sclick:*:{
n402=  if ($did == 14) { set -u180 %WizPass $did(25) | set -u180 %WizMail $did(27) | if ($me != $did(23)) { nick $did(23) | .enable #WizNickReg | halt } | else { nickserv register $did(25) $did(27) | dialog -mn UserWizard10 UserWizard10 | dialog -c UserWizard9 } }
n403=  if ($did == 15) { dialog -mn UserWizard8 UserWizard8 | dialog -c UserWizard9 }
n404=}
n405=on 1:dialog:UserWizard10:init:0:{ .timerWizSec 125 1 WizSec | .enable #WizRegRepWait | .timerWizFail 1 120 WizRegFail }
n406=on 1:dialog:UserWizard10:sclick:*:{ if ($did == 10) { .timerWizSec off | unset %WizSec | .disable #WizRegRepWait } | if ($did == 28) { dialog -mn UserWizard9 UserWizard9 | dialog -c UserWizard10 | .disable #WizRegRepWait | .timer -m 1 500 did -i UserWizard9 23 1 $me } }
n407=on 1:sockopen:wizard:{
n408=  if ($sockerr > 0) { 
n409=    did -ri UserWizard2 26 1 Ошибка в процессе проверки. Попробуйте ещё раз.
n410=    did -e UserWizard2 23,24
n411=    did -b UserWizard2 27
n412=    halt
n413=  }
n414=  .timer 1 1 sockwrite -n wizard nick wizard $+ $r(a,z) $+ $r(A,z) $+ $r(11111,9999999999)
n415=  .timer 1 2 sockwrite -n wizard user wiz wiz wiz wiz
n416=}
n417=on *:sockread:wizard:{
n418=  sockread %wiz
n419=  if ($sockerr > 0) { 
n420=    echo -s Ошибка он сокhbl
n421=    did -ri UserWizard2 26 1 Ошибка в процессе проверки. Попробуйте ещё раз. 
n422=    did -e UserWizard2 23,24
n423=    did -b UserWizard2 27
n424=    halt
n425=  }
n426=  if ($gettok(%wiz,2,32) == 440) {
n427=    sockclose $sockname 
n428=    did -ri UserWizard2 26 1 Services down. Проверка не возможна. Попробуйте позже.
n429=  }
n430=  if (This nick is owned isin $gettok(%wiz,1-,32)) { sockclose $sockname | sockopen wizard 64.154.61.232 6667 }
n431=  if ($gettok(%wiz,2,32) == 376) { sockwrite -n $sockname nickserv info $did(UserWizard2,23) }
n432=  if ($gettok(%wiz,2-3,32) ==  :Closing Link:) {
n433=    if (banned isin $gettok(%wiz,1-,32)) {
n434=      did -ri UserWizard2 26 1 На ваш адрес на сервере установлен запрет (BAN). Проверка невозможна.
n435=      did -e UserWizard2 23,24 | sockclose wizard | halt
n436=    }
n437=    did -e UserWizard2 23,24 | sockclose wizard 
n438=  }
n439=  if ($gettok(%wiz,1,32) == PING) { sockwrite -n $sockname PONG $gettok(%wiz,2-,32) }
n440=  if (is not registered isin $gettok(%wiz,7-9,32)) {
n441=    did -e UserWizard2 23,24,27 
n442=    did -ri UserWizard2 26 1 Результат: Ник $strip($gettok(%wiz,6,32)) свободен. Берёте?
n443=    sockclose wizard 
n444=  }
n445=  if (Info for isin $gettok(%wiz,1-,32)) { 
n446=    did -e UserWizard2 23,24
n447=    did -ri UserWizard2 26 1 Результат: Ник $did(UserWizard2,23) занят. Попробуйте другой.
n448=    sockclose wizard 
n449=  }
n450=  if (Looking up your hostname... isin $gettok(%wiz,1-,32)) { did -i UserWizard2 26 2  7% }
n451=  if (Checking Ident isin $gettok(%wiz,1-,32)) { did -i UserWizard2 26 2  13% }
n452=  if (Found your hostname isin $gettok(%wiz,1-,32)) { did -i UserWizard2 26 2  17 % }
n453=  if (No Ident response isin $gettok(%wiz,1-,32)) { did -i UserWizard2 26 2  21% }
n454=  if ($gettok(%wiz,2,32) == 001) { did -i UserWizard2 26 2  29% }
n455=  if ($gettok(%wiz,2,32) == 002) { did -i UserWizard2 26 2  33% }
n456=  if ($gettok(%wiz,2,32) == 003) { did -i UserWizard2 26 2  39% }
n457=  if ($gettok(%wiz,2,32) == 004) { did -i UserWizard2 26 2  44% }
n458=  if ($gettok(%wiz,2,32) == 005) { did -i UserWizard2 26 2  49% }
n459=  if ($gettok(%wiz,2,32) == 251) { did -i UserWizard2 26 2  53% }
n460=  if ($gettok(%wiz,2,32) == 252) { did -i UserWizard2 26 2  59% }
n461=  if ($gettok(%wiz,2,32) == 254) { did -i UserWizard2 26 2  65% }
n462=  if ($gettok(%wiz,2,32) == 255) { did -i UserWizard2 26 2  72% }
n463=  if ($gettok(%wiz,2,32) == 265) { did -i UserWizard2 26 2  81% }
n464=  if ($gettok(%wiz,2,32) == 266) { did -i UserWizard2 26 2  89% }
n465=  if ($gettok(%wiz,2,32) == 376) { did -ri UserWizard2 26 1 Ждём ответа от NickServ | did -i UserWizard2 26 2   98% }
n466=}
n467=alias WizAutoNick {
n468=  var %autonick = TrioN- $+ $r(1,99)
n469=  .nick %autonick | .anick _ $+ %autonick $+ _
n470=  return
n471=}
n472=on 1:connect:{
n473=  if ($dialog(UserWizard7) == UserWizard7) { did -e UserWizard7 14 }
n474=}
n475=#WizNickCheck off
n476=on ^*:notice:*:*:{
n477=  if ($nick == nickserv) { 
n478=    if (is not registered isin $1-) { did -i UserWizard8 25 1 Указанный ник СВОБОДЕН | .disable #WizNickCheck }
n479=    if (Info for isin $1-) { did -ri UserWizard8 25 1 Указанный ник ЗАНЯТ | .disable #WizNickCheck }
n480=    halt
n481=  }
n482=}
n483=#WizNickCheck end
n484=#WizNickReg off
n485=on 1:nick:{
n486=  if ($newnick == $did(UserWizard9,23)) {
n487=    did -r UserWizard9 23 | did -i UserWizard9 23 1 $me
n488=    .timer 1 3 WizNickChange
n489=    .disable #WizNickReg
n490=  }
n491=}
n492=#WizNickReg end
n493=alias WizNickChange {
n494=  nickserv register $did(UserWizard9,25) $did(UserWizard9,27)
n495=  dialog -mn UserWizard10 UserWizard10 | dialog -c UserWizard9
n496=}
n497=alias WizSec { 
n498=  if (%WizSec == $null) { set -u120 %WizSec 120 }
n499=  %WizSec = %WizSec - 1
n500=  did -i UserWizard10 22 1 %WizSec
n501=}
n502=alias WizRegFail {
n503=  if ($timer(WizSec) != $null) {
n504=    .timerWizSec off | unset %WizSec
n505=    did -h UserWizard10 21,22
n506=    did -v UserWizard10 26,27,28
n507=    .disable #WizRegRepWait
n508=  }
n509=}
n510=#WizRegRepWait off
n511=on ^*:notice:*:*:{
n512=  if ($nick == nickserv) { 
n513=    if (has been temporarily registered isin $1-) {
n514=      .timerWizSec off
n515=      did -h UserWizard10 21,22
n516=      did -v UserWizard10 23,24
n517=      .timer 1 30 .disable #WizRegRepWait
n518=      if (%nickservLog == 1) {
n519=        write $shortfn($mircdir) $+ texts\nickserv.txt РЕГИСТРАЦИЯ НИКА $date $time
n520=        write $shortfn($mircdir) $+ texts\nickserv.txt Ник: $me
n521=        write $shortfn($mircdir) $+ texts\nickserv.txt Пароль: %WizPass
n522=        write $shortfn($mircdir) $+ texts\nickserv.txt Email: %WizMail
n523=        write $shortfn($mircdir) $+ texts\nickserv.txt ================
n524=      }
n525=      write $shortfn($mircdir) $+ texts\mynick.txt $me
n526=      set %nick $+ $me $me | set %pass $+ $me %WizPass
n527=      .timer 1 5 .disable #WizRegRepWait
n528=      halt
n529=    }
n530=    else { halt }
n531=  }
n532=}
n533=#WizRegRepWait end
n534=;#################################################################################################################################
n535=;;;;;;;;;;;
n536=;;;;;;;;;;
n537=;====> LAG Monitoring
n538=;;;;;;;;;;
n539=;;;;;;;;;;;
n540=dialog NRgL_general {
n541=  title "Настройка LagChecker"
n542=  option dbu
n543=  size -1 -1 176 162
n544=  text "Цвет фона:", 1, 5 5 40 7, right
n545=  combo 20, 46 4 40 50, drop
n546=  text "Цвет графика:", 2, 90 5 40 7, right
n547=  combo 21, 131 4 40 50, drop
n548=  text "Цвет значений:", 3, 5 18 40 7, right
n549=  combo 22, 46 17 40 50, drop
n550=  text "Цвет надписей:", 4, 90 18 40 7, right
n551=  combo 23, 131 17 40 50, drop
n552=  text "Интервал:", 5, 5 32 27 7
n553=  edit "", 24, 32 30 20 10
n554=  text "сек.", 6, 53 32 10 7
n555=  text "Предел графика, сек.:", 7, 70 32 58 7, right
n556=  edit "", 25, 129 30 20 10
n557=  check "авто", 26, 150 30 25 12
n558=  text "Положение полосы (в %):", 8, 5 50 64 7
n559=  edit "", 27, 70 48 20 10
n560=  text "* Не советуется ставить значение интервала меньше, чем 5, так как тогда у Вас будут показываться конкретные лаги (этим просто забивается трафик).", 9, 5 65 166 25
n561=  text "* Положение полосы указывается в процентах от общей высоты графика, допустимые значения - от 1 до 100.", 10, 5 90 166 20
n562=  text "* При установленной опции 'авто' в пределе графика предельное значение графика выставляется автоматически: если текущее значение лага превышает предел, предел поднимается (кратно 5-и), если в течении определенного времени не было превышения предела, предел опускается до текущего значения лага.", 11, 5 110 166 40
n563=  button "Обновить",30, 95 48 36 10, cancel
n564=  button "Закрыть",31, 131 48 36 10, cancel
n565=}
n566=on 1:dialog:NRgL_general:init:0:{
n567=  did -i $dname 20,21,22,23 1 св.серый | did -i $dname 20,21,22,23 1 т.серый | did -i $dname 20,21,22,23 1 св.синий | did -i $dname 20,21,22,23 1 голубой
n568=  did -i $dname 20,21,22,23 1 бирюзовый | did -i $dname 20,21,22,23 1 т.зеленый | did -i $dname 20,21,22,23 1 св.зеленый | did -i $dname 20,21,22,23 1 желтый
n569=  did -i $dname 20,21,22,23 1 оранжевый | did -i $dname 20,21,22,23 1 т.розовый | did -i $dname 20,21,22,23 1 коричневый | did -i $dname 20,21,22,23 1 красный
n570=  did -i $dname 20,21,22,23 1 зеленый | did -i $dname 20,21,22,23 1 синий | did -i $dname 20,21,22,23 1 черный | did -i $dname 20,21,22,23 1 белый
n571=  did -c $dname 20 $calc(%NRgL_c0 + 1) | did -c $dname 21 $calc(%NRgL_c1 + 1) | did -c $dname 22 $calc(%NRgL_c4 + 1) | did -c $dname 23 $calc(%NRgL_c3 + 1)
n572=  did -a $dname 24 %NRgL_time | did -a $dname 25 %NRgL_up | did -a $dname 27 %NRgL_line
n573=  if (%NRgL_autoup == 1) { did -c $dname 26 } | if ($did(26).state == 1) { did -b $dname 25 }
n574=}
n575=on 1:dialog:NRgL_general:sclick:*:{
n576=  var %tmp | if ($did == 20) { %tmp = $did(20).sel | dec %tmp | %NRgL_c0 = %tmp } | if ($did == 21) { %tmp = $did(21).sel | dec %tmp | %NRgL_c1 = %tmp }
n577=  if ($did == 22) { %tmp = $did(22).sel | dec %tmp | %NRgL_c4 = %tmp } | if ($did == 23) { %tmp = $did(23).sel | dec %tmp | %NRgL_c3 = %tmp }
n578=  if ($did == 26) { if ($did(26).state == 1) { did -b $dname 25 | %NRgL_autoup = 1 } | else { did -e $dname 25 | %NRgL_autoup = 0 } }
n579=  if ($did == 30) { if ($window(@NeoRa_LagMonitoring_1.0) != $null) { NRgLager_upd } }
n580=}
n581=on 1:dialog:NRgL_general:edit:*:{
n582=  var %tmp | if ($did == 24) { if ($did(24) < 1) { did -r $dname 24 | did -a $dname 24 2 } | %NRgL_time = $did(24)
n583=  if (($server != $null) && ($window(@NeoRa_LagMonitoring_1.0) != $null)) { timerLag1 -c 0 %NRgL_time raw -q ping $!ctime } }
n584=  if ($did == 25) { if ($did(25) < 1) { did -r $dname 25 | did -a $dname 25 2 } | %NRgL_up = $did(25) }
n585=  if ($did == 27) { if (($did(27) < 1) || ($did(27) > 100)) { did -r $dname 27 | did -a $dname 27 50 } | %NRgL_line = $did(27) } 
n586=}
n587=#NRgL_pong off
n588=on ^1:pong:{
n589=  if ($window(@NeoRa_LagMonitoring_1.0) == $null) { return }
n590=  var %tmp, %tmp_line, %tmp_last, %tmp_cur, %tmp_scale
n591=  %tmp_line = $calc(24 - ((24 / 100) * %NRgL_line))
n592=  %NRgL_cur = $ctime - $2
n593=  if (%NRgL_autoup == 1) {
n594=    if (%NRgL_cur > %NRgL_up) {
n595=      %tmp = $int($calc(%NRgL_cur / 5)) + 1
n596=      %NRgL_up = $calc(%tmp * 5)
n597=      %NRgL_count = 0
n598=    }
n599=    else {
n600=      inc %NRgL_count
n601=      if (%NRgL_count > 17) {
n602=        %tmp = $int($calc(%NRgL_cur / 5))+1
n603=        %NRgL_up = $calc(%tmp * 5)
n604=        if (%NRgL_up < 5) { %NRgL_up = 5 }
n605=        %NRgL_count = 0
n606=      }
n607=    }
n608=  }
n609=  %tmp_scale = $calc(25/%NRgL_up)
n610=  %tmp_cur = %NRgL_cur
n611=  %tmp_cur = $calc(25 - (%tmp_cur * %tmp_scale))
n612=  if (%tmp_cur == 25) { %tmp_cur = 24 }
n613=  %tmp_last = %NRgL_last
n614=  %tmp_last = $calc(25 - (%tmp_last * %tmp_scale))
n615=  if (%tmp_last == 25) { %tmp_last = 24 }
n616=  /drawscroll @NeoRa_LagMonitoring_1.0 -5 0 0 0 174 25
n617=  /drawrect -f @NeoRa_LagMonitoring_1.0 %NRgL_c0 1 169 0 6 26
n618=  /drawline @NeoRa_LagMonitoring_1.0 %NRgL_c1 1 169 25 174 25
n619=  /drawline @NeoRa_LagMonitoring_1.0 %NRgL_c1 1 169 %tmp_last 169 24
n620=  /drawline @NeoRa_LagMonitoring_1.0 %NRgL_c1 1 169 %tmp_last 174 %tmp_cur
n621=  /drawfill -s @NeoRa_LagMonitoring_1.0 %NRgL_c1 %NRgL_c0 172 24
n622=  /drawline @NeoRa_LagMonitoring_1.0 %NRgL_c3 1 0 %tmp_line 174 %tmp_line
n623=  %NRgL_last = %NRgL_cur
n624=  if (%NRgL_cur > %NRgL_max) { %NRgL_max = %NRgL_cur }
n625=  /drawrect -f @NeoRa_LagMonitoring_1.0 %NRgL_c0 1 0 26 174 20
n626=  /drawtext @NeoRa_LagMonitoring_1.0 %NRgL_c3 Arial 14 1 25 Макс.:
n627=  /drawtext -o @NeoRa_LagMonitoring_1.0 %NRgL_c4 Arial 14 33 26 %NRgL_max
n628=  /drawtext @NeoRa_LagMonitoring_1.0 %NRgL_c3 Arial 14 58 25 Тек.:
n629=  /drawtext -o @NeoRa_LagMonitoring_1.0 %NRgL_c4 Arial 14 81 26 %NRgL_cur
n630=  /drawtext @NeoRa_LagMonitoring_1.0 %NRgL_c3 Arial 14 106 25 Предел:
n631=  /drawtext -o @NeoRa_LagMonitoring_1.0 %NRgL_c4 Arial 14 146 26 %NRgL_up
n632=  halt
n633=}
n634=#NRgL_pong end
n635=menu @NeoRa_LagMonitoring_1.0 {
n636=  sclick:{
n637=    if ($inrect($mouse.x, $mouse.y, 33, 26, 50, 37) == $true) {
n638=      %NRgL_max = 0
n639=      /drawrect -f @NeoRa_LagMonitoring_1.0 %NRgL_c0 1 0 26 174 20
n640=      /drawtext @NeoRa_LagMonitoring_1.0 %NRgL_c3 Arial 14 1 25 Макс.:
n641=      /drawtext -o @NeoRa_LagMonitoring_1.0 %NRgL_c4 Arial 14 33 26 %NRgL_max
n642=      /drawtext @NeoRa_LagMonitoring_1.0 %NRgL_c3 Arial 14 58 25 Тек.:
n643=      /drawtext -o @NeoRa_LagMonitoring_1.0 %NRgL_c4 Arial 14 81 26 %NRgL_cur
n644=      /drawtext @NeoRa_LagMonitoring_1.0 %NRgL_c3 Arial 14 106 25 Предел:
n645=      /drawtext -o @NeoRa_LagMonitoring_1.0 %NRgL_c4 Arial 14 146 26 %NRgL_up
n646=    }
n647=    else {
n648=      /clipboard === Лаги с сервером: максимальный -  $+ %NRgL_max $+ ,  текущий -  $+ %NRgL_cur $+   === 12 $+ (NeoRa LagMonitoring 1.0)
n649=    }
n650=  }
n651=  dclick:/dialog -mn NRgL_general NRgL_general
n652=  rclick:/window -n @NeoRa_LagMonitoring_1.0
n653=}
n654=ON 1:CONNECT:{
n655=  if ($window(@NeoRa_LagMonitoring_1.0) != $null) {
n656=    %NRgL_last = 0 
n657=    %NRgL_max = 0
n658=    %NRgL_cur = 0
n659=    %NRgL_count = 0
n660=    NRgLager_upd
n661=    .enable #NRgL_pong
n662=    .timerLag1 -c 0 %NRgL_time raw -q ping $!ctime
n663=  }
n664=}
n665=ON 1:DISCONNECT:{
n666=  if ($window(@NeoRa_LagMonitoring_1.0) != $null) {
n667=    .timerLag1 off
n668=    .disable #NRgL_pong
n669=    %NRgL_last = 0 
n670=    %NRgL_max = 0
n671=    %NRgL_cur = 0
n672=    %NRgL_count = 0
n673=    /drawrect -f @NeoRa_LagMonitoring_1.0 %NRgL_c0 1 0 0 174 40
n674=    /drawfill @NeoRa_LagMonitoring_1.0 %NRgL_c0 %NRgL_c0 0 0
n675=    /drawline @NeoRa_LagMonitoring_1.0 3 1 0 25 174 25
n676=    /drawtext @NeoRa_LagMonitoring_1.0 %NRgL_c3 Arial 14 1 25 Макс.:
n677=    /drawtext -o @NeoRa_LagMonitoring_1.0 %NRgL_c4 Arial 14 33 26 %NRgL_max
n678=    /drawtext @NeoRa_LagMonitoring_1.0 %NRgL_c3 Arial 14 58 25 Тек.:
n679=    /drawtext -o @NeoRa_LagMonitoring_1.0 %NRgL_c4 Arial 14 81 26 %NRgL_cur
n680=    /drawtext @NeoRa_LagMonitoring_1.0 %NRgL_c3 Arial 14 106 25 Предел:
n681=    /drawtext -o @NeoRa_LagMonitoring_1.0 %NRgL_c4 Arial 14 146 26 %NRgL_up
n682=    /drawtext -o @NeoRa_LagMonitoring_1.0 4 Arial 20 24 3 РАССОЕДИНЕН
n683=  }
n684=}
n685=;#############################################################################################################################
n686=;;;;;;
n687=;;;;;
n688=;====> Crack Finder
n689=;;;;;
n690=;;;;;;
n691=dialog CrackFinder {
n692=  title "Crack поиск"
n693=  option dbu
n694=  size -1 -1 130 50
n695=  text "Введите название программы для которой необходимо найти crack и нажмите ''Поиск''",11, 5 3 120 14, center
n696=  combo 13, 8 20 95 110, drop, edit
n697=  button "Del",14, 106 20 17 10, disable
n698=  button "Поиск",15, 8 33 115 10, disable, ok
n699=}
n700=on 1:dialog:CrackFinder:*:*:{
n701=  if ($devent == init && $did == 0) { CrFprogIns }
n702=  if ($devent == sclick) {
n703=    if ($did == 13) { if ($did(13) != $null) did -e $dname 14,15 | else { did -b $dname 14,15 } }
n704=    if ($did == 14) { write -dw" $+ $did(13) $+ " $shortfn($mircdir) $+ texts\CrFHist.txt | did -r $dname 13 | CrFprogIns }
n705=    if ($did == 15) { CrFstart $did(13) }
n706=  }
n707=  if ($devent == edit) {
n708=    if ($read -w" $+ $did(13) $+ " $shortfn($mircdir) $+ texts\CrFHist.txt == $did(13)) { did -e $dname 14 } | else { did -b $dname 14 }
n709=    if ($did(13) != $null) { did -e $dname 15 } | if ($did(13) == $null) { did -b $dname 14,15 }
n710=  }
n711=}
n712=alias CrFprogIns {
n713=  var %CrFL = $calc($lines($mircdirtexts\CrFHist.txt) + 1) | :next | dec %CrFL 1 | if (%CrFL <= 0) { return }
n714=  did -i CrackFinder 13 $calc($did(CrackFinder,13).lines + 1) $read -l $+ %CrFL $shortfn($mircdir) $+ texts\CrFHist.txt | goto next
n715=}
n716=alias CrFstart {
n717=  if ($read -w" $+ $1- $+ " $shortfn($mircdir) $+ texts\CrFHist.txt != $1-) { write $shortfn($mircdir) $+ texts\CrFHist.txt $1- }
n718=  else { write -dw" $+ $1- $+ " $shortfn($mircdir) $+ texts\CrFHist.txt | write $shortfn($mircdir) $+ texts\CrFHist.txt $1- }
n719=  did -r CrackFinder 13 | CrFprogIns | %CrFnumTok = $numtok($1-,32) + 1 | %CrFInd = 1 | %CrFstr = $gettok($1-,%CrFInd,32) 
n720=  :next | inc %CrFInd 1
n721=  if (%CrFInd >= %CrFnumTok) { var %CrFurl = http://astalavista2.box.sk/cgi-bin/robot/robot?project=robot&gfx=robot&srch= $+ %CrFstr $+ &submit=+search+ | run %CrFurl | halt }
n722=  %CrFstr = %CrFstr $+ + $+ $gettok($1-,%CrFInd,32) | goto next
n723=}
n724=;##################################################################################################################################
n725=;;;;;;;;;;;;
n726=;;;;;;;;;
n727=;;;======> NEORA TrioN Update Informer
n728=;;;;;;;;;
n729=;;;;;;;;;;;;
n730=alias NEORAnews {
n731=  if (%UDPmode.SCR == on) { sockopen updater www.neora.ru 80 | halt }
n732=  if (%UDPmode.SITE == on) { sockopen siteupd www.neora.ru 80 }
n733=}
n734=on 1:sockopen:verslook:{
n735=  if ($sockerr > 0) { unset %UPDstatus , %UPDnfo | sockclose verslook | halt }
n736=  sockwrite -n verslook GET /cgi-bin/getup.cgi?prog=trion HTTP/1.0
n737=  sockwrite verslook $crlf
n738=}
n739=on 1:sockread:verslook:{
n740=  if ($sockerr > 0) { unset %UPDstatus , %UPDnfo | sockclose verslook | halt }
n741=  sockread %UPDnfo
n742=  if (%UPDstatus == vers) {
n743=    if ($gettok(%UPDnfo,1,32) == ENDNEOVERSION) { sockclose verslook | unset %UPDstatus , %UPDnfo }
n744=    else {
n745=      if ($window(@NEORA_VERSION) == $null) { 
n746=        window -adok @NEORA_VERSION 82 68 365 270 $gettok($readini $mircdirmirc.ini fonts fchannel,1,46) $gettok($readini $mircdirmirc.ini fonts fchannel,2-,46) 
n747=      }
n748=      if (%UPDnfo != $null) { echo @NEORA_VERSION %UPDnfo }
n749=    }
n750=  }
n751=  if ($gettok(%UPDnfo,1,32) == NEOVERSION) { 
n752=    %UPDstatus = vers
n753=    if ($window(@NEORA_VERSION) == $null) { 
n754=      window -adok @NEORA_VERSION 82 68 365 270 $gettok($readini $mircdirmirc.ini fonts fchannel,1,46) $gettok($readini $mircdirmirc.ini fonts fchannel,2-,46) 
n755=    }
n756=    if ($gettok(%UPDnfo,2,32) == %lastversion) { 
n757=      echo @NEORA_VERSION Вы пользуетесь последней версией NEORA TrioN. 
n758=      echo @NEORA_VERSION $str($chr(160),7) 3Обновления не требуется.
n759=      echo @NEORA_VERSION -
n760=    }
n761=    if ($gettok(%UPDnfo,2,32) > %lastversion) {
n762=      echo @NEORA_VERSION Вы пользуетесь старой версией NEORA TrioN.
n763=      echo @NEORA_VERSION $str($chr(160),7) 4Рекомендуем обновить версию.
n764=      echo @NEORA_VERSION -
n765=    }
n766=  }
n767=}
n768=on 1:sockopen:sitelook:{
n769=  if ($sockerr > 0) { unset %UPDstatus , %UPDnfo | sockclose sitelook | halt }
n770=  sockwrite -n sitelook GET /cgi-bin/getup.cgi?prog=site HTTP/1.0
n771=  sockwrite sitelook $crlf
n772=}
n773=on 1:sockread:sitelook:{
n774=  if ($sockerr > 0) { unset %UPDstatus , %UPDnfo | sockclose sitelook | halt }
n775=  sockread %UPDnfo
n776=  if (%UPDstatus == vers) {
n777=    if ($gettok(%UPDnfo,1,32) == ENDSITEUPDATE) { sockclose sitelook | unset %UPDstatus , %UPDnfo }
n778=    else {
n779=      if ($window(@NEORA_SITE_NEWS) == $null) { 
n780=        window -adok @NEORA_SITE_NEWS 82 68 365 270 $gettok($readini $mircdirmirc.ini fonts fchannel,1,46) $gettok($readini $mircdirmirc.ini fonts fchannel,2-,46) 
n781=      }
n782=      if (%UPDnfo != $null) { echo @NEORA_SITE_NEWS %UPDnfo }
n783=    }
n784=  }
n785=  if ($gettok(%UPDnfo,1,32) == SITEUPDATE) { 
n786=    %UPDstatus = vers 
n787=  }
n788=}
n789=on 1:sockopen:updater:{
n790=  if ($sockerr > 0) { unset %UPDstatus , %UPDnfo | sockclose updater | halt }
n791=  sockwrite -n updater GET /cgi-bin/getup.cgi?prog=trion HTTP/1.0
n792=  sockwrite updater $crlf
n793=}
n794=on 1:sockopen:siteupd:{
n795=  if ($sockerr > 0) { unset %UPDstatus , %UPDnfo | sockclose siteupd | halt }
n796=  sockwrite siteupd GET /cgi-bin/getup.cgi?prog=site HTTP/1.0 $crlf 
n797=  sockwrite siteupd $crlf
n798=}
n799=
n800=on 1:sockread:siteupd:{
n801=  if ($sockerr > 0) { unset %UPDstatus , %UPDnfo | sockclose siteupd | halt }
n802=  sockread %UPDnfo
n803=  if (%UPDstatus == site) {
n804=    if ($gettok(%UPDnfo,1,32) == ENDSITEUPDATE) { sockclose siteupd | unset %UPDstatus , %UPDvers , %UPDnfo | halt  }
n805=    if ($window(@NEORA_NEWS) == $null) { 
n806=      window -adok @NEORA_NEWS 82 68 365 270 $gettok($readini $mircdirmirc.ini fonts fchannel,1,46) $gettok($readini $mircdirmirc.ini fonts fchannel,2-,46) 
n807=    }
n808=    if (%UPDnfo != $null) { echo @NEORA_NEWS %UPDnfo }
n809=  }
n810=  if ($gettok(%UPDnfo,1,32) == SITEUPDATE) {
n811=    if ($gettok(%UPDnfo,2,32) > %lastsiteupd) { %UPDstatus = site | set %lastsiteupd $gettok(%UPDnfo,2,32) }
n812=    else { sockclose siteupd | unset %UPDstatus , %UPDvers , %UPDnfo | halt }
n813=  }
n814=}
n815=on 1:sockread:updater:{
n816=  if ($sockerr > 0) { unset %UPDstatus , %UPDnfo | sockclose updater | halt }
n817=  sockread %UPDnfo
n818=  if (%UPDstatus == vers) { 
n819=    if ($gettok(%UPDnfo,1,32) == ENDNEOVERSION) {
n820=      if (%UDPmode.SITE == on) {
n821=        sockclose updater | sockopen siteupd www.neora.ru 80
n822=        halt
n823=      }
n824=      else { sockclose updater | unset %UPDstatus , %UPDvers , %UPDnfo | halt }
n825=    }
n826=    if ($window(@NEORA_NEWS) == $null) { 
n827=      window -adok @NEORA_NEWS 82 68 365 270 $gettok($readini $mircdirmirc.ini fonts fchannel,1,46) $gettok($readini $mircdirmirc.ini fonts fchannel,2-,46) 
n828=    }
n829=    if (%UPDnfo != $null) { echo @NEORA_NEWS %UPDnfo }
n830=  }
n831=  if ($gettok(%UPDnfo,1,32) == NEOVERSION) {
n832=    set %UPDvers $gettok(%UPDnfo,2,32)
n833=    if (%lastversion < %UPDvers) {
n834=      if (%UPDre == off && %UPDchecked == %UPDvers) {
n835=        if (%UDPmode.SITE == on) { sockclose updater | sockopen siteupd www.neora.ru 80 | halt }
n836=        else { sockclose updater | %UPDchecked = %UPDvers | unset %UPDnfo , %UPDvers | halt }
n837=      }
n838=      if (%UPDre == off && %UPDchecked < %UPDvers) { %UPDstatus = vers | %UPDchecked = %UPDvers | %UPDre = 1 }
n839=      if (%UPDre != off) {
n840=        %UPDchecked = %UPDvers
n841=        if ($ctime > %UPDre) { %UPDstatus = vers }
n842=        else { 
n843=          if (%UDPmode.SITE == on) { sockclose updater | sockopen siteupd www.neora.ru 80 | halt }
n844=          else { sockclose updater | unset %UPDnfo , %UPDvers  }
n845=        }
n846=      }
n847=    }
n848=  }
n849=}
n850=;on 1:close:@:{
n851=;  if ($target == @NEORA_NEWS && %UPDre != off) { dialog -m UPDremind UPDremind }
n852=;}
n853=dialog UPDoptions {
n854=  title "NEORA NEWS options"
n855=  option dbu
n856=  size -1 -1 140 50
n857=  button "Ок",10, 40 36 60 10, cancel
n858=  check "Включить проверку обновлений",11, 5 5 100 8
n859=  check "Проверять обновление версий NEORA TrioN",12, 13 15 125 8
n860=  check "Проверять обновление сайта NEORA Group",13, 13 25 125 8
n861=}
n862=on 1:dialog:UPDoptions:*:*:{
n863=  if ($devent == init && $did == 0) { 
n864=    if (%UPDmode == on) { did -c $dname 11 } | else { did -b $dname 12,13 }
n865=    if (%UDPmode.SCR == on) { did -c $dname 12 }
n866=    if (%UDPmode.SITE == on) { did -c $dname 13 }
n867=  }
n868=  if ($devent == sclick) {
n869=    if ($did == 11) { if ($did(11).state == 1) { %UPDmode = on | did -e $dname 12,13 } | else { %UPDmode = off | did -b $dname 12,13 } }
n870=    if ($did == 12) { if ($did(12).state == 1) { %UDPmode.SCR = on } | else { %UDPmode.SCR = off } }
n871=    if ($did == 13) { if ($did(13).state == 1) { %UDPmode.SITE = on } | else { %UDPmode.SITE = off } }
n872=  }
n873=}
n874=dialog UPDremind  {
n875=  title "NEORA NEWS remind"
n876=  option dbu
n877=  size -1 -1 120 43
n878=  button "Ок",10, 40 30 40 10, cancel
n879=  text "Напомнить об обновлении скрипта через:",11, 5 5 110 8
n880=  combo 12, 5 15 110 100, drop
n881=}
n882=on 1:dialog:UPDremind:*:*:{
n883=  if ($devent == init && $did == 0) { 
n884=    did -i $dname 12 1 Больше не напоминать
n885=    did -i $dname 12 2 Через один день
n886=    did -i $dname 12 3 Через три дня
n887=    did -i $dname 12 4 Через одну неделю
n888=    did -i $dname 12 5 Через две недели
n889=    did -c $dname 12 3
n890=  }
n891=  if ($devent == sclick) { 
n892=    if ($did == 10) {
n893=      if ($did(12).sel == 1) { set %UPDre off }
n894=      if ($did(12).sel == 2) { set %UPDre $ctime + 86400 }
n895=      if ($did(12).sel == 3) { set %UPDre $ctime + 259200 }
n896=      if ($did(12).sel == 4) { set %UPDre $ctime + 604800 }
n897=      if ($did(12).sel == 5) { set %UPDre $ctime + 1209600 }
n898=    }
n899=  }
n900=}
n901=;#####################################################################################################################################
n902=;;;;;;;
n903=;;;;
n904=;====> away dialog
n905=;;;;
n906=;;;;;
n907=dialog awaywarn {
n908=  title "AWAY"
n909=  option dbu
n910=  size 80 95 80 38
n911=  box "",9, 1 0 78 22
n912=  button "Вернуться",10, 1 24 78 12, cancel
n913=  button "Hide",12, 100 100 5 5, ok
n914=  text "В данный момент Вы находитесь в режиме AWAY",11, 3 5 74 16, center
n915=}
n916=on 1:dialog:awaywarn:sclick:10:{ goneback }
n917=;################################################################################################################################
n918=menu @NeoTerminal {
n919=  $iif(($sock(TermSockName,0) == 1) , Разорвать):{
n920=    sockclose TermSockName
n921=    echo @NeoTerminal 4> Соеденение разорвано пользователем.
n922=    if (%TelTermLog == on) { 
n923=      write $shortfn($mircdir) $+ texts\TelTermLog.txt Соеденение разорвано пользователем.
n924=      write $shortfn($mircdir) $+ texts\TelTermLog.txt <<<ЗАКРЫТИЕ СЕССИИ $date $time
n925=    }
n926=    did -i NeoTerminal 16 1 Соединиться
n927=  }
n928=  $iif(($sock(TermSockName,0) != 1 && $did(NeoTerminal,13) != $null && $did(NeoTerminal,15) != $null),Соединить):{
n929=    NeoTermOpen $did(NeoTerminal,13) $did(NeoTerminal,15)
n930=  }
n931=  -
n932=  Full Help:TelTermHelp
n933=  Команды:TTCommands
n934=  -
n935=  Очистить:clear @NeoTerminal
n936=  Закрыть:dialog -c NeoTerminal | set %TermFullScr no
n937=  -
n938=  $iif((%TermFullScr == no),Full Screen):window -ax @NeoTerminal | set %TermFullScr yes
n939=  $iif((%TermFullScr == yes),Restore):window -ar @NeoTerminal | set %TermFullScr no
n940=}
