[script]
n0=;#############################################################################################################################
n1=;                    !ПРОСЬБА: НЕ ТРОГАЙТЕ НИЧЕГО НЕ ЗНАКОМОГО ВАМ РУКАМИ ИНАЧЕ ОНО СЛОМАЕТСЯ :)
n2=;#############################################################################################################################
n3=;
n4=;                                                                    R E M O T E      S C R I P T S     1
n5=;
n6=;                                #     #     #     #     #     #     #     #     #     #     #     #     #     #     #     #     #     # 
n7=;                                       #                    NEORA TrioN DALNET SERV DIALOGS                        #
n8=;                                              #                 Copyright 1999-2001 NEORA Group                    #
n9=;                                                      #           trion@neora.ru     www.NEORA.ru            #
n10=;                                                              #     #     #     #     #     #     #     #    #    # 
n11=;;;;;;;;
n12=;===> DALnet services: GENERAL
n13=;;;;;;;;
n14=dialog generalserv {
n15=  title "Настройка отображения сообщений DALnet сервисов"
n16=  option dbu
n17=  size -1 -1 220 175
n18=  button "Закрыть",10, 161 147 42 10, cancel
n19=  menu "NickServ",400
n20=  item "Идентификация",401
n21=  item break,409
n22=  item "Регистрация",402
n23=  item "Сброс ника",412
n24=  item break,210
n25=  menu "Изменение",411,400
n26=  item "Опций ника",403,411
n27=  item "Информации",404
n28=  item break,413,400
n29=  item "Маски ника",405
n30=  item "Возврат ника",406
n31=  item break,414
n32=  item "Log событий",407
n33=  menu "ChanServ",420
n34=  item "Идентификация",421
n35=  item break,428
n36=  item "Регистрация",422
n37=  item "Сброс ника",432
n38=  item break,429
n39=  menu "Изменение",430,420
n40=  item "Опций канала",423,430
n41=  item "Mode Lock",424
n42=  item "Информации",425
n43=  item break,431,420
n44=  menu "Списки канала",433,420
n45=  item "Супер Оp",426
n46=  item "Авто Оp",436
n47=  item "Авто Kick",446
n48=  item break,434,420
n49=  item "Log событий",427
n50=  menu "MemoServ",450
n51=  item "Читать",451
n52=  item "Писать",452
n53=  item break,454
n54=  item "Направить",453
n55=  menu "Общие",460
n56=  item "Ники",461
n57=  item "Каналы",462
n58=  item break,468
n59=  item "CTCP",463
n60=  item break,469
n61=  item "Away",464
n62=  item "Топики",465
n63=  item break,470
n64=  item "Kick\Ban",466
n65=  item break,471
n66=  item "Quits",467
n67=  menu "Защита",479
n68=  menu "Flood защита",480,479
n69=  item "CTCP Flood",481
n70=  item "Text Flood",482
n71=  item "Other Flood",483
n72=  item break,485
n73=  item "Flood Kicks",484
n74=  menu "Личная защита",490,479
n75=  item "Ban защита",491
n76=  item "Kick защита",492
n77=  item "DeOp защита",493
n78=  item break,495
n79=  item "Auto Join",494
n80=  menu "Другое",500
n81=  item "Skin браузер",501
n82=  item "Стилизатор",502
n83=  item break,506
n84=  item "Цензура",503
n85=  item "Реклама",504
n86=  item break,507
n87=  item "Другое",505
n88=  box "Настройка окон вывода сообщений DALnet сервисов",19, 17 7 186 45
n89=  radio "Не обрабатывать сообщения DALnet сервисов",20, 25 17 150 8, group
n90=  radio "Отображать сообщения всех сервисов в одном отдельном окне",21, 25 27 180 8
n91=  radio "Для каждого сервиса выводить отдельное окно",22, 25 37 150 8
n92=  box "Цвет сообщений сервисов",23, 17 55 186 88
n93=  radio "Одинаковый цвет сообщений для всех сервисов",24, 35 65 140 8, group
n94=  combo 25, 75 75 65 120 , drop
n95=  icon 26, 145 75 10 10, Pics\col7.bmp, 1, noborder
n96=  radio "Отдельный цвет для каждого сервиса", 27, 35 90 140 8
n97=  text "NickServ:",28, 47 101 25 8
n98=  combo 29, 75 100 65 120 , drop
n99=  icon 30, 145 100 10 10, Pics\col6.bmp, 1, noborder
n100=  text "ChanServ:",31, 46 113 25 8
n101=  combo 32, 75 112 65 120 , drop
n102=  icon 33, 145 112 10 10, Pics\col8.bmp, 1, noborder
n103=  text "MemoServ:",34, 45 125 27 8
n104=  combo 35, 75 124 65 120 , drop
n105=  icon 36, 145 124 10 10, Pics\col10.bmp, 1, noborder
n106=  check "Вести Log сообщений сервисов",37, 20 148 93 8
n107=  button "Смотреть",38, 113 148 30 8
n108=}
n109=on 1:dialog:generalserv:init:0:{
n110=  if (%SMsgLog == on) { did -c $dname 37 }
n111=  colourIns $dname 25 | did -c $dname 25 %SMsgColAll | did -g $dname 26 pics\col $+ $calc(%SMsgColAll - 1) $+ .bmp
n112=  colourIns $dname 29 | did -c $dname 29 %SMsgColEachN | did -g $dname 30 pics\col $+ $calc(%SMsgColEachN - 1) $+ .bmp
n113=  colourIns $dname 32 | did -c $dname 32 %SMsgColEachC | did -g $dname 33 pics\col $+ $calc(%SMsgColEachC - 1) $+ .bmp
n114=  colourIns $dname 55 | did -c $dname 55 %SMsgColEachO | did -g $dname 33 pics\col $+ $calc(%SMsgColEachO - 1) $+ .bmp
n115=  colourIns $dname 35 | did -c $dname 35 %SMsgColEachM | did -g $dname 36 pics\col $+ $calc(%SMsgColEachM - 1) $+ .bmp
n116=  if (%SMsgColMode == All) { did -c $dname 24 | did -b $dname 28,29,30,31,32,33,34,35,36 } 
n117=  if (%SMsgColMode == Each) { did -c $dname 27 | did -b $dname 25,26 }
n118=  if (%SMWinMode == 0) { did -c $dname  20 | did -b $dname 24,25,26,27,28,29,30,31,32,33,34,35,36 } 
n119=  if (%SMWinMode == 1) { did -c $dname  21 } | if (%SMWinMode == 2) { did -c $dname  22 }
n120=}
n121=on 1:dialog:generalserv:sclick:*:{
n122=  if ($did == 20) { set %SMWinMode 0 | did -b $dname 24,25,26,27,28,29,30,31,32,33,34,35,36 } 
n123=  if ($did == 21) { 
n124=    did -e $dname 24,27 | set %SMWinMode 1 
n125=    if (%SMsgColMode == All) { did -b $dname 28,29,30,31,32,33,34,35,36 | did -e $dname 25,26 } | if (%SMsgColMode == Each) { did -b $dname 25,26 | did -e $dname 28,29,30,31,32,33,34,35,36 }
n126=  } 
n127=  if ($did == 22) { 
n128=    did -e $dname 24,27 | set %SMWinMode 2 
n129=    if (%SMsgColMode == All) { did -b $dname 28,29,30,31,32,33,34,35,36 | did -e $dname 25,26 } | if (%SMsgColMode == Each) { did -b $dname 25,26 | did -e $dname 28,29,30,31,32,33,34,35,36 }
n130=  }
n131=  if ($did == 24) { set %SMsgColMode All | did -b $dname 28,29,30,31,32,33,34,35,36 | did -e $dname 25,26 } 
n132=  if ($did == 27) { set %SMsgColMode Each | did -b $dname 25,26 | did -e $dname 28,29,30,31,32,33,34,35,36 } 
n133=  if ($did(37).state == 1) { set %SMsgLog on } | else { set %SMsgLog off }
n134=  if ($did == 38) { dialog -mn SMLogWhat SMLogWhat }
n135=  if ($did == 25) { set %SMsgColAll $did(25).sel  | did -g $dname 26 pics\col $+ $calc(%SMsgColAll - 1) $+ .bmp }
n136=  if ($did == 29) { set %SMsgColEachN $did(29).sel  | did -g $dname 30 pics\col $+ $calc(%SMsgColEachN - 1) $+ .bmp }
n137=  if ($did == 32) { set %SMsgColEachC $did(32).sel  | did -g $dname 33 pics\col $+ $calc(%SMsgColEachC - 1) $+ .bmp }
n138=  if ($did == 55) { set %SMsgColEachO $did(55).sel  | did -g $dname 56 pics\col $+ $calc(%SMsgColEachO - 1) $+ .bmp }  
n139=  if ($did == 35) { set %SMsgColEachM $did(35).sel  | did -g $dname 36 pics\col $+ $calc(%SMsgColEachM - 1) $+ .bmp }
n140=}
n141=dialog SMLogWhat {
n142=  title "Выберите сервис"
n143=  option dbu
n144=  size -1 -1 75 45
n145=  button "NickServ",11, 1 1 73 10
n146=  button "ChanServ",12, 1 11 73 10
n147=  button "MemoServ",13, 1 21 73 10
n148=  button "Закрыть",10, 1 34 73 10, cancel
n149=}
n150=on 1:dialog:SMLogWhat:sclick:*:{
n151=  if ($did == 11) { run $shortfn($mircdir) $+ texts\NickServMsgLog.txt } | if ($did == 12) { run $shortfn($mircdir) $+ texts\ChanServMsgLog.txt } | if ($did == 13) { run $shortfn($mircdir) $+ texts\MemoServMsgLog.txt }
n152=}
n153=;;;;;;;;
n154=;;;;;;;;
n155=;===> DALnet services: NICKSERV
n156=;;;;;;;;
n157=;;;;;;;;
n158=dialog nickservcenter {
n159=  title "NICKSERV"
n160=  option dbu
n161=  size -1 -1 220 175
n162=  menu "NickServ",400
n163=  item "Идентификация",401
n164=  item break,409
n165=  item "Регистрация",402
n166=  item "Сброс ника",412
n167=  item break,210
n168=  menu "Изменение",411,400
n169=  item "Опций ника",403,411
n170=  item "Информации",404
n171=  item break,413,400
n172=  item "Маски ника",405
n173=  item "Возврат ника",406
n174=  item break,414
n175=  item "Log событий",407
n176=  menu "ChanServ",420
n177=  item "Идентификация",421
n178=  item break,428
n179=  item "Регистрация",422
n180=  item "Сброс ника",432
n181=  item break,429
n182=  menu "Изменение",430,420
n183=  item "Опций канала",423,430
n184=  item "Mode Lock",424
n185=  item "Информации",425
n186=  item break,431,420
n187=  menu "Списки канала",433,420
n188=  item "Супер Оp",426
n189=  item "Авто Оp",436
n190=  item "Авто Kick",446
n191=  item break,434,420
n192=  item "Log событий",427
n193=  menu "MemoServ",450
n194=  item "Читать",451
n195=  item "Писать",452
n196=  item break,454
n197=  item "Направить",453
n198=  menu "Общие",460
n199=  item "Ники",461
n200=  item "Каналы",462
n201=  item break,468
n202=  item "CTCP",463
n203=  item break,469
n204=  item "Away",464
n205=  item "Топики",465
n206=  item break,470
n207=  item "Kick\Ban",466
n208=  item break,471
n209=  item "Quits",467
n210=  menu "Защита",479
n211=  menu "Flood защита",480,479
n212=  item "CTCP Flood",481
n213=  item "Text Flood",482
n214=  item "Other Flood",483
n215=  item break,485
n216=  item "Flood Kicks",484
n217=  menu "Личная защита",490,479
n218=  item "Ban защита",491
n219=  item "Kick защита",492
n220=  item "DeOp защита",493
n221=  item break,495
n222=  item "Auto Join",494
n223=  menu "Interface",500
n224=  item "Skin браузер",501
n225=  item "Шрифты",502
n226=  item "F*-Keys",503
n227=  menu "Разное",510
n228=  item "Стилизатор",511
n229=  item "Цензура",512
n230=  item "Реклама",513
n231=  item break,519
n232=  item "Другое",514
n233=  tab " Idetify ",1, 3 0 214 150
n234=  tab "Reg\Drop",2
n235=  tab "Options",3
n236=  tab "Reg Info",4
n237=  tab "Access",5
n238=  tab "  Kills ",6
n239=  tab " Logs ",7
n240=  button "Закрыть",10, 175 153 42 10, cancel
n241=  box "Настройка ников и паролей",21, 10 17 200 61, tab 1
n242=  text "Ник(и):",22, 15 28 20 8, tab 1
n243=  combo 23, 35 27 70 50, autohs, tab 1
n244=  text "Пароль:",24, 120 28 25 8, tab 1
n245=  edit "",25, 145 27 50 10, autohs, tab 1
n246=  button "Сохранить",26, 145 41 50 10, tab 1
n247=  button "Удалить",27, 145 52 50 10, tab 1
n248=  button "Идентификация",28, 145 63 50 10, tab 1
n249=  box "Настройка идентификации",29, 10 80 200 60, tab 1
n250=  radio "Всегда идентифицироваться в ручном режиме",30, 25 92 150 8, group, tab 1
n251=  radio "Идентифицироваться автоматически:",31, 25 104 150 8, tab 1
n252=  check "при соединении с сервером",32, 45 114 100 8, tab 1
n253=  check "при изменении ников",33, 45 124 100 8, tab 1
n254=  box "Проверка регистрации ника",34, 10 16 82 53, tab 2
n255=  text "Ник:",35, 15 25 20 8, tab 2
n256=  edit "",36, 35 24 50 10, tab 2, autohs
n257=  button "Проверить",37, 15 38 70 10, tab 2
n258=  edit "",38, 15 52 70 10, tab 2, autohs
n259=  box "Регистрация ника",39, 10 70 82 73, tab 2
n260=  text "Ник:",40, 15 80 15 8, tab 2
n261=  edit "",41, 35 79 50 10, tab 2, autohs
n262=  text "Пароль:",42, 15 92 25 8, tab 2
n263=  edit "",43, 42 91 43 10, tab 2
n264=  text "EMail:",44, 15 103 15 9, tab 2
n265=  edit "",45, 15 111 71 10, tab 2, autohs
n266=  button "Зарегистрировать",46, 15 125 71 10, tab 2
n267=  box "Сброс регистрации",47, 103 16 103 70, tab 2
n268=  text "Ник:",48, 110 25 15 8, tab 2
n269=  edit "",49, 130 24 64 10, tab 2, autohs
n270=  button "Запрос сброса",50, 130 36 64 10, disable, tab 2
n271=  text "Строка подтверждения",51, 110 49 70 8, tab 2
n272=  edit "",52, 115 57 80 10, tab 2, autohs
n273=  button "Cброс",53, 115 69 80 10, tab 2
n274=  box "",54, 93 108 97 35, tab 2
n275=  text "После нажатия 'Зарегистрировать' вы получите письмо на указаный email адрес с инструкциями по завершению регистрации ника.",55, 98 114 90 30, tab 2
n276=  box "Смена\Установка\Удаление URL",56, 20 20 173 27, tab 3
n277=  text "URL:",57, 25 30 15 8, tab 3
n278=  edit "",58, 40 29 110 10, tab 3, autohs
n279=  button "Установить",59, 153 29 35 10, tab 3
n280=  box "Опции Ника",60, 40 55 138 70, tab 3
n281=  text "EnForce",61, 55 66 20 8, tab 3
n282=  button "ON",62, 95 65 30 10, tab 3
n283=  button "OFF",63, 130 65 30 10, tab 3
n284=  text "NoMemo",64, 55 77 25 8, tab 3
n285=  button "ON",65, 95 76 30 10, tab 3
n286=  button "OFF",66, 130 76 30 10, tab 3
n287=  text "NoOp",67, 55 88 20 8, tab 3
n288=  button "ON",68, 95 87 30 10, tab 3
n289=  button "OFF",69, 130 87 30 10, tab 3
n290=  text "ShowEMail",70, 55 99 30 8, tab 3
n291=  button "ON",71, 95 98 30 10, tab 3
n292=  button "OFF",72, 130 98 30 10, tab 3
n293=  text "Ник:",73, 65 19 15 8, tab 4
n294=  edit $me,74, 80 18 65 10, tab 4, disable, center
n295=  box "Смена Пароля",77, 25 30 165 40, tab 4
n296=  text "Пароль:",78, 35 40 25 8, tab 4
n297=  edit "",79, 60 39 45 10, tab 4, autohs
n298=  text "Новый:",80, 110 40 25 8, tab 4
n299=  edit "",81, 135 39 45 10, tab 4, autohs
n300=  button "Изменить пароль",82, 80 54 70 10, tab 4
n301=  box "Смена EMail адреса",83, 25 73 165 60, tab 4
n302=  button "Текущий EMail адрес",84, 30 83 60 10, tab 4
n303=  edit "",85, 95 83 90 10, tab 4, autohs
n304=  text "EMail:",86, 30 102 15 8, tab 4
n305=  edit "",87, 50 101 90 10, tab 4, autohs
n306=  button "Сменить",88, 148 101 36 10, tab 4
n307=  text "После нажатия 'Сменить' вы получите письмо на указаный email адрес с инструкциями по завершению изменения.",89, 30 116 160 16, tab 4
n308=  box "Access редактор",90, 10 16 200 130, tab 5
n309=  text "Ник:",91, 55 25 20 8, tab 5
n310=  edit $me,92, 75 24 75 10, tab 5, autohs, disable, center
n311=  combo 93, 25 38 125 102, tab 5 
n312=  button "Список",94, 153 49 50 10, tab 5
n313=  button "Очистить",95, 153 60 50 10, tab 5
n314=  button "Добавить",96, 153 75 50 10, tab 5
n315=  button "Удалить",97, 153 86 50 10, tab 5
n316=  button "Удалить все",98, 153 97 50 10, tab 5
n317=  box "Возврат Вашего зарегистрированного ника",99, 15 25 190 115, tab 6
n318=  text "Ник(и):",100, 25 45 20 8, tab 6
n319=  combo 101, 47 44 70 60, tab 6, autohs
n320=  text "Пароль:",102, 24 105 25 8, tab 6
n321=  edit "",103, 47 104 70 10, tab 6, autohs
n322=  box "Manully:",120, 120 47 80 25, tab 6
n323=  button "Recover",104, 125 55 35 12, disable, tab 6
n324=  button "Release",105, 161 55 35 12, disable,  tab 6
n325=  box "Auto сценарий:",121, 120 72 80 60, tab 6
n326=  text "1. Команда Recover.",122, 123 82 60 8, tab 6 
n327=  text "2. через:",123, 123 92 22 8, tab 6
n328=  edit %autoreleasetime,124, 146 92 15 9, tab 6
n329=  text "сек. Release.",125, 162 92 35 9, tab 6
n330=  check "3.",126, 122 103 15 8, left, tab 6
n331=  text "Взять Killled ник.",127, 139 103 50 8, tab 6
n332=  button "Kill",128, 130 116 62 12, disable, tab 6
n333=  button "Kill Ghost",106, 47 115 70 12, disable, tab 6
n334=  check "сменить ник на убитый",129, 47 128 70 8, tab 6
n335=  check "Вести Log-файл важных изменений настроек и обращений к NickServ",107, 15 20 200 8, tab 7
n336=  list 108, 15 30 192 100, tab 7
n337=  button "Очистить Log-файл",109, 15 130 93 10, tab 7
n338=  button "Редактировать Log-файл",110, 114 130 93 10, tab 7
n339=}
n340=on 1:dialog:nickservcenter:init:0:{
n341=  nickservlogins | nicklistins 23 mynick.txt nickservcenter | nicklistins 101 mynick.txt nickservcenter 
n342=  did -b nickservcenter 25,26,27,28 
n343=  if (%nickident == 0) { did -c nickservcenter 30 | did -b nickservcenter 32,33 } | if (%nickident == 1) { did -c nickservcenter 31 } 
n344=  if (%nickidentconn == 1) { did -c nickservcenter 32 } | if (%nickidentnick == 1) { did -c nickservcenter 33 }
n345=  did -b nickservcenter 37,38,46,52,53 | did -b nickservcenter 82,88 
n346=  did -i nickservcenter 79 1 [ % $+ [ pass $+ [ $me ] ] ] | if (%nickservLog == 1) { did -c nickservcenter 107 } 
n347=  if (%autoreleaseNickCh == on) { did -c $dname 126 } | if (%autoGhostNickCh == on) { did -c $dname 129 }
n348=}
n349=on 1:dialog:nickservcenter:sclick:*:{
n350=  if ($did == 1) { did -r $dname 25,23 | nicklistins 23 mynick.txt nickservcenter | did -b $dname 25 } 
n351=  if ($did == 7) { did -r $dname 108 | nickservlogins }
n352=  if ($did == 10) { .disable #Nick* | .disable #*Nick | .disable #*Nick* } 
n353=  if ($did == 23) { did -e nickservcenter 25,26,27,28 | did -i nickservcenter 25 1 [ % $+ [ pass $+ [ $did(23) ] ] ] }
n354=  if ($did == 26) {
n355=    if ($read -w $+ $did(23) $mircdirtexts\mynick.txt != $did(23)) { write $shortfn($mircdir) $+ texts\mynick.txt $did(23) } | set %nick $+ $did(23) $did(23) | set %pass $+ $did(23) $did(25)
n356=    if (%nickservLog == 1) { 
n357=      write $shortfn($mircdir) $+ texts\nickserv.txt СОХРАНЕНИЕ (ник/пароль) $date $time | write $shortfn($mircdir) $+ texts\nickserv.txt Ник: $did(23)
n358=      write $shortfn($mircdir) $+ texts\nickserv.txt Пароль: $did(25) | write $shortfn($mircdir) $+ texts\nickserv.txt =============================
n359=    }
n360=    did -r nickservcenter 23,25 | nicklistins 23 mynick.txt nickservcenter | did -b nickservcenter 25
n361=  }
n362=  if ($did == 27) { remnickwarn 23 25 nickservcenter }
n363=  if ($did == 28) { 
n364=    if ($server == $null) { ConnError }
n365=    if ($did(23) != $me) { nick $did(23) | if (%nickident != 1 && %nickidentnick != 1) { nickserv identify $did(25) } } 
n366=    else { nickserv identify $did(25) } 
n367=    did -r nickservcenter 23,25 | nicklistins 23 mynick.txt nickservcenter | did -b nickservcenter 25 
n368=  }
n369=  if ($did == 30) { set %nickident 0 | did -b nickservcenter 32,33 } 
n370=  if ($did == 31) { set %nickident 1 | did -e nickservcenter 32,33 }
n371=  if ($did == 32) { if ($did(32).state == 1) { set %nickidentconn 1 } | else { set %nickidentconn 0 } }
n372=  if ($did == 33) { if ($did(33).state == 1) { set %nickidentnick 1 } | else { set %nickidentnick 0 } }
n373=  if ($did == 37) { 
n374=    if ($server != $null) { nickserv info $did(36) } | else { ConnError }
n375=    .enable #CheckNick | did -i nickservcenter 38 1 Ждите... 
n376=  }
n377=  if ($did == 46) {
n378=    if ($server == $null) { ConnError }
n379=    if ($did(41) != $me) { nick $did(41) | .timer 1 5 nickserv register $did(43) $did(45) } 
n380=    if ($did(41) == $me) { nickserv register $did(43) $did(45) }
n381=    if (%nickservLog == 1) {
n382=      write $shortfn($mircdir) $+ texts\nickserv.txt Запрос на РЕГИСТРАЦИЮ НИКА $date $time | write $shortfn($mircdir) $+ texts\nickserv.txt Ник: $did(41) 
n383=      write $shortfn($mircdir) $+ texts\nickserv.txt Пароль: $did(43) | write $shortfn($mircdir) $+ texts\nickserv.txt Email: $did(45) 
n384=      write $shortfn($mircdir) $+ texts\nickserv.txt Ожидание ответа об отпраке E-Mail | write $shortfn($mircdir) $+ texts\nickserv.txt ....
n385=    }
n386=    if ($read -w $+ $did(41) $mircdirtexts\mynick.txt != $did(41)) { write $shortfn($mircdir) $+ texts\mynick.txt $did(41) } 
n387=    set %nick $+ $did(41) $did(41) | set %pass $+ $did(41) $did(43)
n388=  }
n389=  if ($did == 50) { 
n390=    if ($server == $null) { ConnError } | nickserv drop $did(49) 
n391=    .enable #NickDrop | did -e nickservcenter 52 
n392=    did -i nickservcenter 52 1 Ждите... | dialog -mn DropNickReqest DropNickReqest
n393=  } 
n394=  if ($did == 53) { $did(52) }
n395=  if ($did == 59) { if ($server == $null) { ConnError } | nickserv set url $did(58) }
n396=  if ($did == 62) { if ($server == $null) { ConnError } | nickserv set enforce on } 
n397=  if ($did == 63) { if ($server == $null) { ConnError } | nickserv set enforce off } 
n398=  if ($did == 65) { if ($server == $null) { ConnError } | nickserv set nomemo on } 
n399=  if ($did == 66) { if ($server == $null) { ConnError } | nickserv set nomemo off }
n400=  if ($did == 68) { if ($server == $null) { ConnError } | nickserv set noop on } 
n401=  if ($did == 69) { if ($server == $null) { ConnError } | nickserv set noop off } 
n402=  if ($did == 71) { if ($server == $null) { ConnError } | nickserv set showemail on } 
n403=  if ($did == 72) { if ($server == $null) { ConnError } | nickserv set showemail off }
n404=  if ($did == 82) {
n405=    if ($server == $null) { ConnError } | nickserv set passwd $did(79) $did(81) 
n406=    if (%nickservLog == 1) {
n407=      write $shortfn($mircdir) $+ texts\nickserv.txt Запрос СМЕНЫ ПАРОЛЯ $date $time | write $shortfn($mircdir) $+ texts\nickserv.txt Ник: $me 
n408=      write $shortfn($mircdir) $+ texts\nickserv.txt Старый пароль: $did(79) | write $shortfn($mircdir) $+ texts\nickserv.txt Новый пароль: $did(81)
n409=      write $shortfn($mircdir) $+ texts\nickserv.txt ОЖИДАНИЕ ПОДТВЕРЖДЕНИЯ СМЕНЫ ПАРОЛЯ..... | write $shortfn($mircdir) $+ texts\nickserv.txt .....
n410=    }
n411=  }
n412=  if ($did == 84) { if ($server == $null) { ConnError } | .enable #NickMailC | nickserv set email } 
n413=  if ($did == 88) { 
n414=    if ($server == $null) { ConnError } 
n415=    nickserv set email $did(87) 
n416=    if (%nickservLog == 1) {
n417=      write $shortfn($mircdir) $+ texts\nickserv.txt Запрос СМЕНЫ EMail АДРЕСА $date $time 
n418=      write $shortfn($mircdir) $+ texts\nickserv.txt Новый EMail: $did(87) 
n419=      write $shortfn($mircdir) $+ texts\nickserv.txt ==========================
n420=    }
n421=  }
n422=  if ($did == 94) { if ($server == $null) { ConnError } | did -r $dname 93 | .enable #NickAccess | nickserv access list } 
n423=  if ($did == 95) { did -r nickservcenter 93 } 
n424=  if ($did == 96) { if ($server == $null) { ConnError } | nickserv access add $did(93) } 
n425=  if ($did == 97) { if ($server == $null) { ConnError } | nickserv access del $did(93) } 
n426=  if ($did == 98) { if ($server == $null) { ConnError } | accesswipewarn }
n427=  if ($did == 101) { 
n428=    did -e nickservcenter 104,105,106,128
n429=    did -i nickservcenter 103 1 [ % $+ [ pass $+ [ $did(101) ] ] ] 
n430=  } 
n431=  if ($did == 104) { if ($server == $null) { ConnError } | nickserv recover $did(101) $did(103) }
n432=  if ($did == 105) { if ($server == $null) { ConnError } | nickserv release $did(101) $did(103) } 
n433=  if ($did == 106) { 
n434=    if ($server == $null) { ConnError }
n435=    if (%autoGhostNickCh == off) { nickserv ghost $did(101) $did(103) }
n436=    if (%autoGhostNickCh == on) { nickserv ghost $did(101) $did(103) | .enable #AutoKillNickCh }
n437=  } 
n438=  if ($did(107).state == 1) { set %nickservLog 1 } 
n439=  else { set %nickservLog 0 }
n440=  if ($did == 109) { nickservlogclearwarn } 
n441=  if ($did == 110) { run $shortfn($mircdir) $+ texts\nickserv.txt }
n442=  if ($did(126).state == 1) { set %autoreleaseNickCh on } | else { set %autoreleaseNickCh off }
n443=  if ($did == 128) { 
n444=    if ($server == $null) { ConnError }
n445=    nickserv recover $did(101) $did(103) | .timer 1 %autoreleasetime nickserv release $did(101) $did(103) 
n446=    if (%autoreleaseNickCh == on) { .timer 1 %autoreleasetime .enable #AutoKillNickCh }
n447=  }
n448=  if ($did(129).state == 1) { set %autoGhostNickCh on } | else { set %autoGhostNickCh off }
n449=}
n450=
n451=on 1:dialog:nickservcenter:edit:*:{
n452=  if ($did == 23) { did -e nickservcenter 25 } 
n453=  if ($did == 25) { did -e nickservcenter 26,27,28 } 
n454=  if ($did == 36) { did -e nickservcenter 37 } | if ($did(36) == $null) { did -b nickservcenter 37 }
n455=  if ($did == 45) && ($did(41) != $null) && ($did(43) != $null) { did -e nickservcenter 46 }
n456=  if ($did == 43) && ($did(41) != $null) && ($did(45) != $null) { did -e nickservcenter 46 } 
n457=  if ($did == 41) && ($did(43) != $null) && ($did(45) != $null) { did -e nickservcenter 46 }
n458=  if ($did(45) == $null) || ($did(43) == $null) || ($did(41) == $null) { did -b nickservcenter 46 }
n459=  if ($did == 58) { did -e nickservcenter 59 } 
n460=  if ($did == 81) { did -e nickservcenter 82 } 
n461=  if ($did(81) == $null) || ($did(79) == $null) { did -b nickservcenter 82 }
n462=  if ($did == 87) { did -e nickservcenter 88 } 
n463=  if ($did(101) == $null) { did -b nickservcenter 104,105,106,128 } | else { did -e nickservcenter 104,105,106,128 }
n464=  if ($did == 49) { 
n465=    if ($read -w $did(49) $mircdirtexts\mynick.txt == $did(49)) { did -e $dname 50 }
n466=    if ($did(49) != $read -w $did(49) $mircdirtexts\mynick.txt ) { did -b $dname 50 }
n467=    if ($did(49) == $null) { did -b $dname 50 }
n468=  }
n469=  if ($did(124) <= 120) { set %autoreleasetime $did(124) }
n470=  if ($did(124) < 1) { did -r $dname 124 | did -i $dname 124 1 1 | set %autoreleasetime 1 }
n471=  if ($did(124)  > 120) { did -r $dname 124 | did -i $dname 124 1 120 | set %autoreleasetime 120 }
n472=  if ($did(124) == $null) { did -b $dname 128 }
n473=}
n474=#CheckNick off
n475=on *:notice:*:*:{ 
n476=  if ($nick == nickserv) { 
n477=    if (Info for isin $1-) { 
n478=      did -i nickservcenter 38 1 Ник занят 
n479=      dialog -mn NoFreeNickChoose NoFreeNickChoose
n480=      .disable #CheckNick 
n481=    } 
n482=    if (is not registered isin $1-) { 
n483=      did -i nickservcenter 38 1 Ник свободен 
n484=      .disable #CheckNick 
n485=      ;did -i nickservcenter 41 1 $did(nickservcenter,36) 
n486=      dialog -mn FreeNickChoose FreeNickChoose
n487=    } 
n488=    halt 
n489=  } 
n490=}
n491=#CheckNick end
n492=#NickDrop off
n493=on *:notice:*:*:{ 
n494=  if ($nick == nickserv) { 
n495=    if (To confirm, type isin $1-) { 
n496=      did -e nickservcenter 53 
n497=      did -i nickservcenter 52 1 $4- 
n498=    } 
n499=    if (Channel management of isin $1-) { 
n500=      .disable #NickDrop 
n501=    } 
n502=    halt 
n503=  } 
n504=}
n505=#NickDrop end
n506=#NickMailC off
n507=on *:notice:*:*:{ 
n508=  if ($nick == nickserv) { 
n509=    if (Your email address isin $1-3) { did -i nickservcenter 85 1 $8 }
n510=    if (You have requested to set your email isin $1-) { mailChangSent $10 }
n511=    .timer 1 5 .disable #NickMailC | halt 
n512=  } 
n513=}
n514=#NickMailC end
n515=#NickAccess off
n516=on *:notice:*:*:{ 
n517=  if ($nick == nickserv) { 
n518=    if (Registration for this nick is not complete isin $1-) { .disable #NickAccess | did -r $dname 93 }
n519=    if (Access List for !isin $1-) && (End of List !isin $1-) { 
n520=      did -i nickservcenter 93 1 $1- 
n521=    } 
n522=    if (End of List isin $1-) { 
n523=      did -i nickservcenter 93 1 Access список - $me | .disable #NickAccess 
n524=    } 
n525=    else { halt }
n526=    halt 
n527=  } 
n528=}
n529=#NickAccess end
n530=#AutoKillNickCh off
n531=on *:notice:*:*:{ 
n532=  if ($nick == nickserv) { 
n533=    if (The nick isin $1-2 && has been released isin $4-) { nick $strip($3) | .disable #AutoKillNickCh }
n534=    if (Your ghost has been successfully killed isin $1-) { nick $did(nickservcenter,101) | .disable #AutoKillNickCh }
n535=  }
n536=}
n537=#AutoKillNickCh end
n538=#AutoKillNickChMenu off
n539=on *:notice:*:*:{ 
n540=  if ($nick == nickserv) { 
n541=    if (The nick isin $1-2 && has been released isin $4-) { nick $strip($3) | .disable #AutoKillNickCh }
n542=    if (Your ghost has been successfully killed isin $1-) { nick %JustKilledNick | .disable #AutoKillNickCh }
n543=  }
n544=}
n545=#AutoKillNickChMenu end
n546=;;;;;;;;
n547=;;;;;;;;
n548=;===> DALnet services: CHANSERV
n549=;;;;;;;;
n550=;;;;;;;;
n551=dialog chanservcenter {
n552=  title "CHANSERV"
n553=  option dbu
n554=  size -1 -1 220 175
n555=  button "Закрыть",10, 175 153 42 10, cancel
n556=  menu "NickServ",400
n557=  item "Идентификация",401
n558=  item break,409
n559=  item "Регистрация",402
n560=  item "Сброс ника",412
n561=  item break,210
n562=  menu "Изменение",411,400
n563=  item "Опций ника",403,411
n564=  item "Информации",404
n565=  item break,413,400
n566=  item "Маски ника",405
n567=  item "Возврат ника",406
n568=  item break,414
n569=  item "Log событий",407
n570=  menu "ChanServ",420
n571=  item "Идентификация",421
n572=  item break,428
n573=  item "Регистрация",422
n574=  item "Сброс ника",432
n575=  item break,429
n576=  menu "Изменение",430,420
n577=  item "Опций канала",423,430
n578=  item "Mode Lock",424
n579=  item "Информации",425
n580=  item break,431,420
n581=  menu "Списки канала",433,420
n582=  item "Супер Оp",426
n583=  item "Авто Оp",436
n584=  item "Авто Kick",446
n585=  item break,434,420
n586=  item "Log событий",427
n587=  menu "MemoServ",450
n588=  item "Читать",451
n589=  item "Писать",452
n590=  item break,454
n591=  item "Направить",453
n592=  menu "Общие",460
n593=  item "Ники",461
n594=  item "Каналы",462
n595=  item break,468
n596=  item "CTCP",463
n597=  item break,469
n598=  item "Away",464
n599=  item "Топики",465
n600=  item break,470
n601=  item "Kick\Ban",466
n602=  item break,471
n603=  item "Quits",467
n604=  menu "Защита",479
n605=  menu "Flood защита",480,479
n606=  item "CTCP Flood",481
n607=  item "Text Flood",482
n608=  item "Other Flood",483
n609=  item break,485
n610=  item "Flood Kicks",484
n611=  menu "Личная защита",490,479
n612=  item "Ban защита",491
n613=  item "Kick защита",492
n614=  item "DeOp защита",493
n615=  item break,495
n616=  item "Auto Join",494
n617=  menu "Interface",500
n618=  item "Skin браузер",501
n619=  item "Шрифты",502
n620=  item "F*-Keys",503
n621=  menu "Разное",510
n622=  item "Стилизатор",511
n623=  item "Цензура",512
n624=  item "Реклама",513
n625=  item break,519
n626=  item "Другое",514
n627=  tab " Idetify ",1, 3 0 214 150
n628=  tab "Reg\Drop",2
n629=  tab "Options",3
n630=  tab "MLock",4
n631=  tab "Reg Info",5
n632=  tab " Lists ",6
n633=  tab " Logs ",7
n634=  box "Настройка идентификации",21, 10 15 200 67, tab1
n635=  text "   В большенстве случаев прежде чем изменять настройки канала Вам необходимо идентифицироваться как FOUNDER:",22, 15 25 185 18, tab1
n636=  radio "Всегда идентифицироваться в ручном режиме",23, 25 41 185 10, group, tab1
n637=  radio "Идентифицироваться на всех каналах при соединении",24, 25 53 185 10, tab1
n638=  radio "Идентифицироваться лишь при заходе на канал",25, 25 65 185 10, tab1
n639=  box "Настройка каналов и паролей",26, 10 85 200 60, tab1
n640=  text "Канал(ы):",27,15 95 25 8, tab1
n641=  combo 28, 40 95 70 50, edit, autohs, tab1
n642=  text "Пароль:",29, 120 95 20 8, tab1
n643=  edit "",30, 146 94 55 10, autohs, tab1
n644=  button "Сохранить",31, 146 108 55 10, tab1
n645=  button "Удалить",32, 146 118 55 10, tab1
n646=  button "Идентификация",33, 146 128 55 10, tab1
n647=  box "Регистрация канала",40, 10 20 192 53, tab 2
n648=  text "Канал:",41, 15 30 20 8, tab 2
n649=  edit "",42, 35 29 70 10, autohs, tab 2
n650=  text "Пароль:",43, 120 30 20 8, tab 2
n651=  edit "",44, 144 29 51 10, autohs, tab 2
n652=  text "Описание:",45, 15 45 30 8, tab 2
n653=  edit "",46, 45 44 150 10, autohs, tab 2
n654=  button "Зарегистрировать",47, 140 58 55 10, tab 2
n655=  text "Для регистрирации канала Вам необходимо находится  на  этом  канале и иметь там OP.",230, 15 56 120 16, tab 2
n656=  box "Сброс регистрации канала",48, 10 78 192 55, tab 2
n657=  text "Канал(ы):",49, 15 90 25 8, tab 2
n658=  combo 50, 45 89 70 80, drop, edit, autohs, tab 2
n659=  button "Запрос сброса",51, 120 89 75 10, tab 2
n660=  text "Строка подтверждения:",52, 15 105 40 18, tab 2
n661=  edit "",53, 58 109 90 10, tab 2
n662=  button "СБРОС",54, 153 109 42 10, tab 2
n663=  radio "Super Op",60, 10 19 67 10, push, tab 6, group
n664=  radio "Auto Op",69, 78 19 67 10, push, tab 6
n665=  radio "Auto Kick",75, 146 19 65 10, push, tab 6
n666=  text "Канал(ы):",61, 15 35 25 8, tab 6
n667=  combo 62, 43 34 97 80, drop, edit, autohs, tab 6
n668=  combo 63, 15 48 145 102, tab 6
n669=  button "SOp список",64, 165 50 45 10, hide, tab 6
n670=  button "Очистить",65, 165 61 45 10, hide, tab 6
n671=  button "Добавить SOp",66, 165 76 45 10, hide, tab 6
n672=  button "Удалить SOp",67, 165 87 45 10, hide, tab 6
n673=  button "Удалить Всех",68, 165 98 45 10, hide, tab 6
n674=  button "AOp список",70, 165 50 45 10, hide, tab 6
n675=  button "Очистить",71, 165 61 45 10, hide, tab 6
n676=  button "Добавить AOp",72, 165 76 45 10, hide, tab 6
n677=  button "Удалить AOp",73, 165 87 45 10, hide, tab 6
n678=  button "Удалить Всех",74, 165 98 45 10, hide, tab 6
n679=  button "AKick список",76, 165 50 45 10, hide, tab 6
n680=  button "Очистить",77, 165 61 45 10, hide, tab 6
n681=  button "Добавить AKick",78, 165 76 45 10, hide, tab 6
n682=  button "Удалить AKick",79, 165 87 45 10, hide, tab 6
n683=  button "Удалить Всех",80, 165 98 45 10, hide, tab 6
n684=  check "Вести Log-файл важных изменений настроек и обращений к ChanServ",100, 15 20 200 8, tab 7
n685=  list 101, 15 30 192 100, tab 7
n686=  button "Очистить Log-файл",102, 15 130 93 10, tab 7
n687=  button "Редактировать Log-файл",103, 114 130 93 10, tab 7
n688=  box "Настройки канала",120, 10 15 200 130, tab 3
n689=  text "Канал(ы):",121, 45 28 25 8, tab 3
n690=  combo 122, 73 27 75 80, drop, edit, autohs, tab 3
n691=  text "Keep Topic",123, 25 45 30 8, tab 3
n692=  button "ON",124, 60 44 30 10, tab 3
n693=  button "OFF",125, 92 44 30 10, tab 3
n694=  text "Opguard",126, 25 57 30 8, tab 3
n695=  button "ON",127, 60 56 30 10, tab 3
n696=  button "OFF",128, 92 56 30 10, tab 3
n697=  text "Ident",129, 25 69 30 8, tab 3
n698=  button "ON",130, 60 68 30 10, tab 3
n699=  button "OFF",131, 92 68 30 10, tab 3
n700=  text "Restrict",132, 25 81 30 8, tab 3
n701=  button "ON",133, 60 80 30 10, tab 3
n702=  button "OFF",134, 92 80 30 10, tab 3
n703=  text "Verbose",135, 25 93 30 8, tab 3
n704=  button "ON",136, 60 92 30 10, tab 3
n705=  button "OFF",137, 92 92 30 10, tab 3
n706=  text "Leaveops",138, 25 105 30 8, tab 3
n707=  button "ON",139, 60 104 30 10, tab 3
n708=  button "OFF",140, 92 104 30 10, tab 3
n709=  text "Unsecure",141, 25 117 30 8, tab 3
n710=  button "ON",142, 60 116 30 10, tab 3
n711=  button "OFF",143, 92 116 30 10, tab 3
n712=  text "Private",231, 25 129 30 8, tab 3
n713=  button "ON",232, 60 128 30 10, tab 3
n714=  button "OFF",233, 92 128 30 10, tab 3
n715=  text "Topiclock",144, 150 45 30 8, tab 3
n716=  button "Founder",145, 140 55 50 10, tab 3
n717=  button "SOp",146, 140 66 50 10, tab 3
n718=  button "OFF",147, 140 77 50 10, tab 3
n719=  text "Memo",148, 156 95 30 8, tab 3
n720=  button "Founder",149, 140 105 25 10, tab 3
n721=  button "SOp",150, 167 105 25 10, tab 3
n722=  button "AOp",151, 140 116 25 10, tab 3
n723=  button "None",152, 167 116 25 10, tab 3
n724=  box "Настройка ModeLock параметра",160, 10 15 200 133, tab 4
n725=  text "Канал(ы):",161, 50 25 25 8, tab 4
n726=  combo 162, 79 24 75 80, tab 4, drop, edit, autohs
n727=  text "TopicOpOnly (t)",163, 40 42 40 8, tab 4
n728=  radio "+",164, 90 41 20 9, tab 4, push, group
n729=  radio "-",165, 112 41 20 9, tab 4, push
n730=  radio "null",166, 134 41 20 9, tab 4, push
n731=  text "NoExternalMsg (n)",167, 40 52 45 8, tab 4
n732=  radio "+",168, 90 51 20 9, tab 4, push, group
n733=  radio "-",169, 112 51 20 9, tab 4, push
n734=  radio "null",170, 134 51 20 9, tab 4, push
n735=  text "InviteOnly (i)",171, 40 62 40 8, tab 4
n736=  radio "+",172, 90 61 20 9, tab 4, push, group
n737=  radio "-",173, 112 61 20 9, tab 4, push
n738=  radio "null",174, 134 61 20 9, tab 4, push
n739=  text "Moderated (m)",175, 40 72 40 8, tab 4
n740=  radio "+",176, 90 71 20 9, tab 4, push, group
n741=  radio "-",177, 112 71 20 9, tab 4, push
n742=  radio "null",178, 134 71 20 9, tab 4, push
n743=  text "Private (p)",179, 40 82 40 8, tab 4
n744=  radio "+",180, 90 81 20 9, tab 4, push, group
n745=  radio "-",181, 112 81 20 9, tab 4, push
n746=  radio "null",182, 134 81 20 9, tab 4, push
n747=  text "Secret (s)",183, 40 92 40 8, tab 4
n748=  radio "+",184, 90 91 20 9, tab 4, push, group
n749=  radio "-",185, 112 91 20 9, tab 4, push
n750=  radio "null",186, 134 91 20 9, tab 4, push
n751=  text "Limit (l)",187, 40 102 40 8, tab 4
n752=  radio "+",188, 90 101 20 9, tab 4, push, disable, group
n753=  radio "-",189, 112 101 20 9, tab 4, push
n754=  radio "null",190, 134 101 20 9, tab 4, push
n755=  text "Key (k)",191, 40 112 40 8, tab 4
n756=  radio "+",192, 90 111 20 9, tab 4, push, disable, group
n757=  radio "-",193, 112 111 20 9, tab 4, push
n758=  radio "null",194, 134 111 20 9, tab 4, push
n759=  text "No Colour (c)",195, 40 122 40 8, tab 4
n760=  radio "+",196, 90 121 20 9, tab 4, push, group
n761=  radio "-",197, 112 121 20 9, tab 4, push
n762=  radio "null",198, 134 121 20 9, tab 4, push
n763=  text "RegUsersOnly (R)",199, 40 132 45 8, tab 4
n764=  radio "+",200, 90 131 20 9, tab 4, push, group
n765=  radio "-",201, 112 131 20 9, tab 4, push
n766=  radio "null",202, 134 131 20 9, tab 4, push
n767=  button "mLOCK",203, 163 60 35 25, tab 4
n768=  button "unLOCK",204, 163 90 35 25, tab 4
n769=  text "Канал(ы):",210, 50 20 30 8, tab 5
n770=  combo 211, 78 18 70 70, tab 5, drop, edit, autohs
n771=  box "Смена Founder",212, 10 30 200 30, tab 5
n772=  text "Для изменения Founder необходимо знать пароль канала и идентифицироваться у ChanServ как Founder.",213, 15 40 140 16, tab 5
n773=  button "Стать Founder",214, 158 40 46 15, tab 5 
n774=  box "Смена Пароля",215, 10 63 80 45, tab 5
n775=  text "Пароль",216, 13 72 20 8, tab 5
n776=  edit "",217, 35 71 50 10, tab 5, autohs
n777=  text "Новый",218, 13 84 20 8, tab 5
n778=  edit "",219, 35 83 50 10, tab 5, autohs
n779=  button "Изменить пароль",220, 35 95 50 10, tab 5
n780=  box "Установка \ Удаление URL канала",221, 95 63 115 45, tab 5
n781=  text "URL",222, 98 77 13 8, tab 5
n782=  edit "",223, 112 76 93 10, tab 5, autohs
n783=  button "Установить\Удалить URL",224, 112 91 93 10, tab 5
n784=  box "Смена \ Просмотр описания канала",225, 10 110 200 34, tab 5
n785=  edit "",226, 15 118 189 10, tab 5, autohs
n786=  button "Сменить\Просмотреть описание",227, 104 130 100 10, tab 5
n787=}
n788=on 1:dialog:chanservcenter:init:0:{
n789=  chanservlogins
n790=  if (%founderident == 0) { did -c chanservcenter 23 } 
n791=  if (%founderident == 1) { did -c chanservcenter 24 } 
n792=  if (%founderident == 2) { did -c chanservcenter 25 }
n793=  chanlistins 28 mychan.txt chanservcenter 
n794=  chanlistins 50 mychan.txt chanservcenter 
n795=  chanlistinsList 62 
n796=  did -i $dname 62 0 %activchan 
n797=  chanlistins 122 mychan.txt chanservcenter
n798=  chanlistins 162 mychan.txt chanservcenter 
n799=  chanlistins 211 mychan.txt chanservcenter 
n800=  did -b chanservcenter 30,31,32,33 
n801=  did -b chanservcenter 47 
n802=  did -b chanservcenter 51
n803=  did -b chanservcenter 53,54
n804=  if (%chanservLog == 1) { did -c chanservcenter 100 } 
n805=  if (%listvar == sop) { did -fc chanservcenter 60 } 
n806=  if (%listvar == aop) { did -fc chanservcenter 69 } 
n807=  if (%listvar == ak) { did -fc chanservcenter 75 }
n808=  did -b chanservcenter 124,125,127,128,130,131,133,134,136,137,139,140,142,143,145,146,147,149,150,151,152,232,233
n809=  did -b chanservcenter 203,204 
n810=  did -b chanservcenter 214,217,219,220,223,224,226,227
n811=  if (%tmode == plus) { did -c chanservcenter 164 } 
n812=  if (%tmode == minus) { did -c chanservcenter 165 } 
n813=  if (%tmode == off) { did -c chanservcenter 166 }
n814=  if (%nmode == plus) { did -c chanservcenter 168 } 
n815=  if (%nmode == minus) { did -c chanservcenter 169 } 
n816=  if (%nmode == off) { did -c chanservcenter 170 }
n817=  if (%imode == plus) { did -c chanservcenter 172 } 
n818=  if (%imode == minus) { did -c chanservcenter 173 } 
n819=  if (%imode == off) { did -c chanservcenter 174 }
n820=  if (%mmode == plus) { did -c chanservcenter 176 } 
n821=  if (%mmode == minus) { did -c chanservcenter 177 } 
n822=  if (%mmode == off) { did -c chanservcenter 178 }
n823=  if (%pmode == plus) { did -c chanservcenter 180 } 
n824=  if (%pmode == minus) { did -c chanservcenter 181 } 
n825=  if (%pmode == off) { did -c chanservcenter 182 }
n826=  if (%smode == plus) { did -c chanservcenter 184 } 
n827=  if (%smode == minus) { did -c chanservcenter 185 } 
n828=  if (%smode == off) { did -c chanservcenter 186 }
n829=  if (%lmode == minus) { did -c chanservcenter 189 } 
n830=  if (%lmode == off) { did -c chanservcenter 190 } 
n831=  if (%kmode == minus) { did -c chanservcenter 193 } 
n832=  if (%kmode == off) { did -c chanservcenter 194 }
n833=  if (%cmode == plus) { did -c chanservcenter 196 } 
n834=  if (%cmode == minus) { did -c chanservcenter 197 } 
n835=  if (%cmode == off) { did -c chanservcenter 198 }
n836=  if (%Rmode == plus) { did -c chanservcenter 200 } 
n837=  if (%Rmode == minus) { did -c chanservcenter 201 } 
n838=  if (%Rmode == off) { did -c chanservcenter 202 }
n839=}
n840=on 1:dialog:chanservcenter:sclick:*:{
n841=  if ($did == 1) { did -r $dname 28 | chanlistins 28 mychan.txt chanservcenter }
n842=  if ($did == 7) { 
n843=    did -r chanservcenter 101 
n844=    chanservlogins 
n845=  } 
n846=  if ($did == 10) { 
n847=    .disable #ChanDrop 
n848=    .disable #*List 
n849=  } 
n850=  if ($did == 23) { 
n851=    set %founderident 0 
n852=  } 
n853=  if ($did == 24) { 
n854=    set %founderident 1 
n855=  } 
n856=  if ($did == 25) { 
n857=    set %founderident 2 
n858=  }
n859=  if ($did == 28) { 
n860=    did -e chanservcenter 30,31,32,33 
n861=    did -i chanservcenter 30 1 [ % $+ [ pass $+ [ $did(28) ] ] ] 
n862=  }
n863=  if ($did == 31) {
n864=    if (%chanservLog == 1) { 
n865=      write $shortfn($mircdir) $+ texts\chanserv.txt СОХРАНЕНИЕ (канал/пароль) $date $time 
n866=      write $shortfn($mircdir) $+ texts\chanserv.txt Канал: $did(28)
n867=      write $shortfn($mircdir) $+ texts\chanserv.txt Пароль: $did(30) 
n868=      write $shortfn($mircdir) $+ texts\chanserv.txt =============================
n869=    }
n870=    if ($read -w $+ $did(28) $mircdirtexts\mychan.txt != $did(28)) { 
n871=      write $shortfn($mircdir) $+ texts\mychan.txt $did(28) 
n872=    } 
n873=    set %chan $+ $did(28) $did(28) 
n874=    set %pass $+ $did(28) $did(30) 
n875=    did -r chanservcenter 28,30 
n876=    chanlistins 28 mychan.txt chanservcenter 
n877=    did -b chanservcenter 30
n878=  }
n879=  if ($did == 32) { 
n880=    remchanwarn 28 30 chanservcenter 
n881=    did -b chanservcenter 30 
n882=  } 
n883=  if ($did == 33) { 
n884=    chanserv identify $did(28) $did(30) 
n885=  }
n886=  if ($did == 47) { 
n887=    chanserv register $did(42) $did(44) $did(46) 
n888=    if ($read -w $+ $did(42) $mircdirtexts\mychan.txt != $did(42)) { 
n889=      write $shortfn($mircdir) $+ texts\mychan.txt $did(42) 
n890=    } 
n891=    set %chan $+ $did(42) $did(42) 
n892=    set %pass $+ $did(42) $did(44)
n893=    if (%chanservLog == 1) { 
n894=      write $shortfn($mircdir) $+ texts\chanserv.txt ЗАПРОС на РЕГИСТРАЦИЮ КАНАЛА $date $time 
n895=      write $shortfn($mircdir) $+ texts\chanserv.txt Канал: $did(42) 
n896=      write $shortfn($mircdir) $+ texts\chanserv.txt Пароль $did(44)
n897=      write $shortfn($mircdir) $+ texts\chanserv.txt Описание $did(46) 
n898=      write $shortfn($mircdir) $+ texts\chanserv.txt ОЖИДАНИЕ ответа.......
n899=      write $shortfn($mircdir) $+ texts\chanserv.txt ....
n900=    }
n901=    did -i chanservcenter 28 1 $did(42) 
n902=    did -r chanservcenter 42,44,46
n903=  }
n904=  if ($did == 50) { 
n905=    did -e chanservcenter 51 
n906=  } 
n907=  if ($did == 51) { 
n908=    chanserv drop $did(50) 
n909=    did -e chanservcenter 53 
n910=    did -i chanservcenter 53 1 Ждите... 
n911=    .enable #ChanDrop 
n912=    dialog -mn ChanDropCodeWait ChanDropCodeWait
n913=  }
n914=  if ($did == 54) { 
n915=    $did(53) 
n916=    if (%chanservLog == 1) { 
n917=      write $shortfn($mircdir) $+ texts\chanserv.txt Запрос СБРОСА РЕГИСТРАЦИИ 
n918=      write $shortfn($mircdir) $+ texts\chanserv.txt Канал: $did(50)
n919=      write $shortfn($mircdir) $+ texts\chanserv.txt Строка подтверждение: $did(53) 
n920=      write $shortfn($mircdir) $+ texts\chanserv.txt Ожидание ответа.....
n921=      write $shortfn($mircdir) $+ texts\chanserv.txt .......
n922=    }
n923=  }
n924=  if ($did(100).state == 1) { set %chanservLog 1 } 
n925=  else { set %chanservLog 0 } 
n926=  if ($did == 102) { chanservlogclearwarn } 
n927=  if ($did == 103) { run $shortfn($mircdir) $+ texts\chanserv.txt }
n928=  if ($did == 60) { 
n929=    set %listvar sop 
n930=    did -r chanservcenter 63 
n931=    did -v chanservcenter 64,65,66,67,68 
n932=    did -h chanservcenter 70,71,72,73,74,76,77,78,79,80 
n933=  }
n934=  if ($did == 69) { 
n935=    set %listvar aop 
n936=    did -r chanservcenter 63 
n937=    did -v chanservcenter 70,71,72,73,74 
n938=    did -h chanservcenter 64,65,66,67,68,76,77,78,79,80 
n939=  }
n940=  if ($did == 75) { 
n941=    set %listvar ak 
n942=    did -r chanservcenter 63 
n943=    did -v chanservcenter 76,77,78,79,80 
n944=    did -h chanservcenter 64,65,66,67,68,70,71,72,73,74 
n945=  }
n946=  if ($did == 64) { 
n947=    .enable #SOpList 
n948=  chanserv sop $did(62) list } 
n949=  if ($did == 65) { did -r chanservcenter 63 } 
n950=  if ($did == 66) { chanserv sop $did(62) add $did(63) }
n951=  if ($did == 67) { chanserv sop $did(62) del $left($did(63),1) 
n952=  } 
n953=  if ($did == 68) { sopwipewarn }
n954=  if ($did == 70) { 
n955=    .enable #AOpList 
n956=  chanserv aop $did(62) list } 
n957=  if ($did == 71) { did -r chanservcenter 63 } 
n958=  if ($did == 72) { chanserv aop $did(62) add $did(63) }
n959=  if ($did == 73) { 
n960=    chanserv aop $did(62) del $left($did(63),1) 
n961=  } 
n962=  if ($did == 74) { aopwipewarn }
n963=  if ($did == 76) { 
n964=    .enable #AKickList 
n965=    chanserv akick $did(62) list 
n966=  } 
n967=  if ($did == 77) { did -r chanservcenter 63 } 
n968=  if ($did == 78) { chanserv akick $did(62) add $did(63) }
n969=  if ($did == 79) { chanserv akick $did(62) del $left($did(63),1) } 
n970=  if ($did == 80) { akickwipewarn }
n971=  if ($did == 122) { did -e chanservcenter 124,125,127,128,130,131,133,134,136,137,139,140,142,143,145,146,147,149,150,151,152,232,233 }
n972=  if ($did == 124) { chanserv set $did(122) keeptopic on } 
n973=  if ($did == 125) { chanserv set $did(122) keeptopic off } 
n974=  if ($did == 127) { chanserv set $did(122) opguard on } 
n975=  if ($did == 128) { chanserv set $did(122) opguard off }
n976=  if ($did == 130) { chanserv set $did(122) ident on } 
n977=  if ($did == 131) { chanserv set $did(122) ident off } 
n978=  if ($did == 133) { chanserv set $did(122) restrict on } 
n979=  if ($did == 134) { chanserv set $did(122) restrict off }
n980=  if ($did == 136) { chanserv set $did(122) verbose on } 
n981=  if ($did == 137) { chanserv set $did(122) verbose off } 
n982=  if ($did == 139) { chanserv set $did(122) leaveops on } 
n983=  if ($did == 140) { chanserv set $did(122) leaveops off }
n984=  if ($did == 142) { chanserv set $did(122) unsecure on } 
n985=  if ($did == 143) { chanserv set $did(22) unsecure off } 
n986=  if ($did == 145) { chanserv set $did(122) topiclock founder } 
n987=  if ($did == 146) { chanserv set $did(122) topiclock sop } 
n988=  if ($did == 147) { chanserv set $did(122) topiclock off } 
n989=  if ($did == 149) { chanserv set $did(122) memo founder } 
n990=  if ($did == 150) { chanserv set $did(122) memo sop } 
n991=  if ($did == 151) { chanserv set $did(122) memo aop } 
n992=  if ($did == 152) { chanserv set $did(122) memo none }
n993=  if ($did == 232) { chanserv set $did(122) private on }
n994=  if ($did == 233) { chanserv set $did(122) private off }
n995=  if ($did == 162) { did -e chanservcenter 203,204 }
n996=  if ($did == 164) { set %tmode plus } 
n997=  if ($did == 165) { set %tmode minus } 
n998=  if ($did == 166) { set %tmode off } 
n999=  if ($did == 168) { set %nmode plus } 
n1000=  if ($did == 169) { set %nmode minus } 
n1001=  if ($did == 170) { set %nmode off }
n1002=  if ($did == 172) { set %imode plus } 
n1003=  if ($did == 173) { set %imode minus } 
n1004=  if ($did == 174) { set %imode off } 
n1005=  if ($did == 176) { set %mmode plus } 
n1006=  if ($did == 177) { set %mmode minus } 
n1007=  if ($did == 178) { set %mmode off }
n1008=  if ($did == 180) { set %pmode plus } 
n1009=  if ($did == 181) { set %pmode minus } 
n1010=  if ($did == 182) { set %pmode off } 
n1011=  if ($did == 184) { set %smode plus } 
n1012=  if ($did == 185) { set %smode minus } 
n1013=  if ($did == 186) { set %smode off }
n1014=  if ($did == 189) { set %lmode minus } 
n1015=  if ($did == 190) { set %lmode off } 
n1016=  if ($did == 193) { set %kmode minus } 
n1017=  if ($did == 194) { set %kmode off }
n1018=  if ($did == 196) { set %cmode plus } 
n1019=  if ($did == 197) { set %cmode minus } 
n1020=  if ($did == 198) { set %cmode off } 
n1021=  if ($did == 200) { set %Rmode plus } 
n1022=  if ($did == 201) { set %Rmode minus } 
n1023=  if ($did == 202) { set %Rmode off }
n1024=  if ($did == 203) {
n1025=    set %modelock "" | if (%tmode == plus) || (%nmode == plus) || (%imode == plus) || (%mmode == plus) || (%pmode == plus) || (%smode == plus) || (%cmode == plus) || (%Rmode == plus) { set %modelock + }
n1026=    if (%tmode == plus) { set %modelock %modelock $+ t } | if (%nmode == plus) { set %modelock %modelock $+ n } | if (%imode == plus) { set %modelock %modelock $+ i } | if (%mmode == plus) { set %modelock %modelock $+ m }
n1027=    if (%pmode == plus) { set %modelock %modelock $+ p } | if (%smode == plus) { set %modelock %modelock $+ s } | if (%cmode == plus) { set %modelock %modelock $+ c } | if (%Rmode == plus) { set %modelock %modelock $+ R }
n1028=    if (%tmode == minus) || (%nmode == minus) || (%imode == minus) || (%mmode == minus) || (%pmode == minus) || (%smode == minus) || (%lmode == minus) || (%kmode == minus) || (%cmode == minus) || (%Rmode == minus) { set %modelock %modelock $+ - }
n1029=    if (%tmode == minus) { set %modelock %modelock $+ t } | if (%nmode == minus) { set %modelock %modelock $+ n } | if (%imode == minus) { set %modelock %modelock $+ i } | if (%mmode == minus) { set %modelock %modelock $+ m }
n1030=    if (%pmode == minus) { set %modelock %modelock $+ p } | if (%smode == minus) { set %modelock %modelock $+ s } | if (%lmode == minus) { set %modelock %modelock $+ l } | if (%kmode == minus) { set %modelock %modelock $+ k }
n1031=    if (%cmode == minus) { set %modelock %modelock $+ c } | if (%Rmode == minus) { set %modelock %modelock $+ R } | chanserv set $did(162) mlock %modelock
n1032=  }
n1033=  if ($did == 204) { chanserv set $did(162) mlock * } 
n1034=  if ($did == 211) { 
n1035=    did -e chanservcenter 214,217,219,223,226,224,227
n1036=    did -i chanservcenter 217 1 [ % $+ [ pass $+ [ $did(211) ] ] ] 
n1037=  } 
n1038=  if ($did == 214) { chanserv set $did(211) founder }
n1039=  if ($did == 220) { 
n1040=    chanserv set $did(211) passwd $did(217) $did(219) 
n1041=    if (%chanservLog == 1) { 
n1042=      write $shortfn($mircdir) $+ texts\chanserv.txt Запрос ИЗМЕНЕНИЯ ПАРОЛЯ $date $time 
n1043=      write $shortfn($mircdir) $+ texts\chanserv.txt Канал: $did(211) 
n1044=      write $shortfn($mircdir) $+ texts\chanserv.txt Старый пароль: $did(217)
n1045=      write $shortfn($mircdir) $+ texts\chanserv.txt Новый пароль: $did(219) 
n1046=      write $shortfn($mircdir) $+ texts\chanserv.txt Ожидание ответа....
n1047=      write $shortfn($mircdir) $+ texts\chanserv.txt .....
n1048=    }
n1049=
n1050=  }
n1051=  if ($did == 224) { chanserv set $did(211) url $did(223) } 
n1052=  if ($did == 227) { chanserv set $did(211) desc $did(226) }
n1053=}
n1054=on 1:dialog:chanservcenter:edit:*:{
n1055=  if ($did == 28) { did -e chanservcenter 30 } 
n1056=  if ($did == 30) { did -e chanservcenter 31,32,33 } 
n1057=  ;if ($did == 42) && ($did(44) != $null) && ($did(46) != $null) { did -e chanservcenter 47 }
n1058=  ;if ($did == 44) && ($did(42) != $null) && ($did(46) != $null) { did -e chanservcenter 47 } 
n1059=  ;if ($did == 46) && ($did(42) != $null) && ($did(44) != $null) { did -e chanservcenter 47 }
n1060=  if ($did(46) != $null || $did(44) != $null || $did(42) != $null && $left($did(42),1) == $chr(35)) { did -e chanservcenter 47 }
n1061=  if ($did(46) == $null || $did(44) == $null || $did(42) == $null || $left($did(42),1) != $chr(35)) { did -b chanservcenter 47 }
n1062=  if ($did == 122) { did -e chanservcenter 124,125,127,128,130,131,133,134,136,137,139,140,142,143,145,146,147,149,150,151,152,232,233 }
n1063=  if ($did == 162) { did -e chanservcenter 203,204 } 
n1064=  if ($did == 211) { did -e chanservcenter 214,217,223,226 } 
n1065=  if ($did == 50) { did -e chanservcenter 51 }
n1066=  if ($did == 217) { did -e chanservcenter 219 } 
n1067=  if ($did == 219) { did -e chanservcenter 220 } 
n1068=  if ($did(217) == $null || $did(219) == $null) { did -b $dname 220 }
n1069=  if ($did(217) != $null && $did(219) != $null) { did -e $dname 220 }
n1070=  if ($did(226) != $null) { did -e chanservcenter 227 }
n1071=  if ($did(226) == $null) { did -b chanservcenter 227 }
n1072=}
n1073=#ChanDrop off
n1074=on *:notice:*:*:{ 
n1075=  if ($nick == chanserv) {
n1076=    if (To confirm, type isin $1-) { 
n1077=      did -r chanservcenter 53 | did -i chanservcenter 53 1 $4- | did -e chanservcenter 54 
n1078=      dialog -mn ChanDropCodeDo ChanDropCodeDo | .disable #ChanDrop
n1079=      if ($dialog(ChanDropCodeWait) == ChanDropCodeWait) { dialog -c ChanDropCodeWait } | halt 
n1080=    }
n1081=    if (You must identify to ChanServ for isin $1- && before you can drop it isin $1-) { 
n1082=      dialog -mn ChanDropCodeError ChanDropCodeError | .disable #ChanDrop 
n1083=      did -r chanservcenter 53
n1084=      if ($dialog(ChanDropCodeWait) == ChanDropCodeWait) { dialog -c ChanDropCodeWait } | halt 
n1085=    }
n1086=  }
n1087=}
n1088=#ChanDrop end
n1089=#SOpList off
n1090=on *:notice:*:*:{ 
n1091=  if ($nick == chanserv) { 
n1092=    if (SOp List for !isin $1-) && (End of List !isin $1-) { did -i chanservcenter 63 1 $1- } 
n1093=    if (End of List isin $1-) { did -i chanservcenter 63 1 SOp cписок канала $did(chanservcenter,62) | .disable #SOpList } 
n1094=    halt 
n1095=  } 
n1096=}
n1097=#SOpList end
n1098=#AOpList off
n1099=on *:notice:*:*:{ if ($nick == chanserv) { if (AOp List for !isin $1-) && (End of List !isin $1-) { did -i chanservcenter 63 1 $1- } | if (End of List isin $1-) { did -i chanservcenter 63 1 AOp список канала $did(chanservcenter,62) | .disable #AOpList } | halt } }
n1100=#AOpList end
n1101=#AKickList off
n1102=on *:notice:*:*:{ if ($nick == chanserv) { if (AKick List for !isin $1-) && (End of List !isin $1-) { did -i chanservcenter 63 1 $1- } | if (End of List isin $1-) { did -i chanservcenter 63 1 AKick список канала $did(chanservcenter,62) | .disable #AKickList } | halt } }
n1103=#AKickList end
n1104=;;;;;;;;
n1105=;;;;;;;;
n1106=;===> DALnet services: MEMOSERV
n1107=;;;;;;;;
n1108=;;;;;;;;
n1109=dialog memoservcenter {
n1110=  title "MEMOSERV"
n1111=  option dbu
n1112=  size -1 -1 220 175
n1113=  menu "NickServ",400
n1114=  item "Идентификация",401
n1115=  item break,409
n1116=  item "Регистрация",402
n1117=  item "Сброс ника",412
n1118=  item break,210
n1119=  menu "Изменение",411,400
n1120=  item "Опций ника",403,411
n1121=  item "Информации",404
n1122=  item break,413,400
n1123=  item "Маски ника",405
n1124=  item "Возврат ника",406
n1125=  item break,414
n1126=  item "Log событий",407
n1127=  menu "ChanServ",420
n1128=  item "Идентификация",421
n1129=  item break,428
n1130=  item "Регистрация",422
n1131=  item "Сброс ника",432
n1132=  item break,429
n1133=  menu "Изменение",430,420
n1134=  item "Опций канала",423,430
n1135=  item "Mode Lock",424
n1136=  item "Информации",425
n1137=  item break,431,420
n1138=  menu "Списки канала",433,420
n1139=  item "Супер Оp",426
n1140=  item "Авто Оp",436
n1141=  item "Авто Kick",446
n1142=  item break,434,420
n1143=  item "Log событий",427
n1144=  menu "MemoServ",450
n1145=  item "Читать",451
n1146=  item "Писать",452
n1147=  item break,454
n1148=  item "Направить",453
n1149=  menu "Общие",460
n1150=  item "Ники",461
n1151=  item "Каналы",462
n1152=  item break,468
n1153=  item "CTCP",463
n1154=  item break,469
n1155=  item "Away",464
n1156=  item "Топики",465
n1157=  item break,470
n1158=  item "Kick\Ban",466
n1159=  item break,471
n1160=  item "Quits",467
n1161=  menu "Защита",479
n1162=  menu "Flood защита",480,479
n1163=  item "CTCP Flood",481
n1164=  item "Text Flood",482
n1165=  item "Other Flood",483
n1166=  item break,485
n1167=  item "Flood Kicks",484
n1168=  menu "Личная защита",490,479
n1169=  item "Ban защита",491
n1170=  item "Kick защита",492
n1171=  item "DeOp защита",493
n1172=  item break,495
n1173=  item "Auto Join",494
n1174=  menu "Interface",500
n1175=  item "Skin браузер",501
n1176=  item "Шрифты",502
n1177=  item "F*-Keys",503
n1178=  menu "Разное",510
n1179=  item "Стилизатор",511
n1180=  item "Цензура",512
n1181=  item "Реклама",513
n1182=  item break,519
n1183=  item "Другое",514
n1184=  tab "            Read Memo        ",1, 3 0 214 150
n1185=  tab "           Send Memo         ",2
n1186=  tab "         Forward Memo      ",3
n1187=  button "Закрыть",10, 175 153 42 10, cancel
n1188=  box "Memo List",21, 12 16 196 126, tab 1
n1189=  combo 22, 23 26 175 80, sort, tab 1
n1190=  button "Список Memo",23, 23 105 58 10, tab 1
n1191=  button "Читать Memo",24, 81 105 58 10, tab 1
n1192=  button "Очистить окно",25, 139 105 59 10, tab 1
n1193=  button "Отметить как Del",26, 23 116 90 10, tab 1
n1194=  button "Убрать метку Del",27, 23 126 90 10, tab 1
n1195=  button "Удалить Все с меткой Del",29, 113 116 85 10, tab 1
n1196=  button "Удалить Все",28, 113 126 85 10, tab 1
n1197=  box "Отправка MEMO:",30, 27 19 160 120, tab 2
n1198=  radio "для ника:",32, 45 29 40 8, tab 2, group
n1199=  edit "",31, 90 27 75 10, tab 2, autohs
n1200=  radio "для канала:",33, 45 43 45 8, tab 2
n1201=  combo 34, 90 43 75 80, tab 2, autohs, drop, edit
n1202=  radio "для SOps и выше",35, 46 56 60 10, tab 2, group, push
n1203=  radio "для AOPs и выше",36, 106 56 59 10, tab 2, push
n1204=  text "Текст Memo:",37, 46 70 34 8, tab 2
n1205=  edit "",38, 80 70 85 50, tab 2, multi, autovs
n1206=  button "Отправить MEMO",39, 80 122 85 10, tab 2
n1207=  box "Статус перенаправки MEMO",40, 27 16 166 30, tab 3
n1208=  edit "",41, 38 27 100 10, tab 3, autohs
n1209=  button "Проверить",42, 143 27 40 10, tab 3
n1210=  box "Настройка Forward",43, 27 48 166 90, tab 3
n1211=  text "Перенаправить все MEMO с Вашего активного ника на:",44, 38 58 150 8, tab 3
n1212=  text "Ник:",45, 42 69 15 8, tab 3
n1213=  combo 46, 63 68 60 50, tab 3,autohs
n1214=  text "Пароль:",47, 38 117 20 8, tab 3
n1215=  edit "",48, 63 116 60 10, tab 3, autohs
n1216=  button "Перенаправить",49, 133 80 50 14, tab 3
n1217=  button "Выключить",50, 133 96 50 14, tab 3
n1218=}
n1219=on 1:dialog:memoservcenter:init:0:{
n1220=  did -b memoservcenter 24,25,26,27,28,29 
n1221=  memochanlist 
n1222=  did -b memoservcenter 39 
n1223=  if (%msendmode == n) { 
n1224=    did -c memoservcenter 32 
n1225=    did -b memoservcenter 34,35,36 
n1226=  }
n1227=  if (%msendmode == c) { 
n1228=    did -c memoservcenter 33 
n1229=    did -b memoservcenter 31 
n1230=  } 
n1231=  if (%memochansend == 1) { did -c memoservcenter 35 } 
n1232=  if (%memochansend == 2) { did -c memoservcenter 36 }
n1233=  nicklistins 46 mynick.txt memoservcenter 
n1234=  did -b memoservcenter 49 
n1235=}
n1236=on 1:dialog:memoservcenter:sclick:*:{
n1237=  if ($did == 10) { .disable #Memo* } 
n1238=  if ($did == 22) { did -e memoservcenter 24,26,27 } 
n1239=  if ($did == 23) { .enable #MemoList | memoserv list } 
n1240=  if ($did == 24) { .enable #MemoRead | memoservins $did(22) }
n1241=  if ($did == 25) { did -r memoservcenter 22 } 
n1242=  if ($did == 26) { memodel $did(22) } 
n1243=  if ($did == 27) { memoundel $did(22) } 
n1244=  if ($did == 28) { memoserv del all }
n1245=  if ($did == 29) { memoserv purge } 
n1246=  if ($did == 32) { set %msendmode n | did -b memoservcenter 34,35,36 | did -e memoservcenter 31 } 
n1247=  if ($did == 33) { set %msendmode c | did -b memoservcenter 31 | did -e memoservcenter 34,35,36 }
n1248=  if ($did == 35) { set %memochansend 1 } | if ($did == 36) { set %memochansend 2 }
n1249=  if ($did == 39) {
n1250=    set %memomsglines $did(38).lines 
n1251=    set %memomsgind 1 
n1252=    %memomsg = $did(38,1)
n1253=    :next 
n1254=    inc %memomsgind 1 
n1255=    if (%memomsgind > %memomsglines) { goto sendmsg } 
n1256=    else { set %memomsg %memomsg $did(38,%memomsgind) | goto next }
n1257=    :sendmsg 
n1258=    if (%msendmode == n) { memoserv send $did(31) %memomsg }
n1259=    if (%msendmode == c) { if (%memochansend == 1) { memoserv sendsop $did(34) %memomsg } 
n1260=    if (%memochansend == 2) { memoserv send $did(34) %memomsg } }
n1261=    unset %memomsglines 
n1262=    unset %memomsgind 
n1263=    halt 
n1264=  }
n1265=  if ($did == 42) { .enable #MemoMail | memoserv forward } 
n1266=  if ($did == 46) { did -e memoservcenter 49 | did -i memoservcenter 48 1 [ % $+ [ pass $+ [ $did(46) ] ] ] }
n1267=  if ($did == 49) { memoserv forward $did(46) $did(48) } 
n1268=  if ($did == 50) { memoserv forward - }
n1269=}
n1270=on 1:dialog:memoservcenter:edit:*:{ 
n1271=  if ($did == 38) { did -e memoservcenter 39 } 
n1272=  if ($did == 46) { did -e memoservcenter 49 } 
n1273=}
n1274=#MemoList off
n1275=on ^*:notice:*:*:{
n1276=  if ($nick == memoserv) {
n1277=    if (no memos isin $1-) { did -i memoservcenter 22 1 --==< Список Memo пуст >==-- } | if (Memo list for !isin $1-) && (End of memo List !isin $1-) && (have no memos !isin $1-)  { did -i memoservcenter 22 1 $1 - от $2  - ( $+ $3- $+ ) }
n1278=    if (End of memo List isin $1-) { did -i memoservcenter 22 1 - Список Memo для $me | did -e memoservcenter 25,28,29 | .disable #MemoList } | halt
n1279=  }
n1280=}
n1281=#MemoList end
n1282=#MemoRead off
n1283=on ^*:notice:*:*:{
n1284=  if ($nick == memoserv) { 
n1285=    if ($window(@MemoRead) == $null) { window -adoke @MemoRead 90 90 400 300 Arial 14 } | if (To delete, use: isin $1-) { echo @MemoRead =-> $1-4 } 
n1286=    else { echo @MemoRead $1- | window -a @MemoRead 90 90 400 300 | .disable #MemoRead } | halt
n1287=  }
n1288=}
n1289=#MemoRead end
n1290=#MemoMail off
n1291=on ^*:notice:*:*:{ if ($nick == memoserv) { if (not been setup isin $1-) { did -i memoservcenter 41 1 Перенаправление не установлено | .disable #MemoMail } | if (are forwarded to isin $1-) { did -i memoservcenter 41 1 Forward -> $8 | .disable #MemoMail } } }
n1292=#MemoMail end
n1293=dialog newmemo {
n1294=  title "New MEMO"
n1295=  option dbu
n1296=  size -1 -1 80 55
n1297=  text "",10, 5 6 70 8, center
n1298=  text "",11, 5 18 70 8, center
n1299=  button "Читать сейчас",12, 5 30 70 10, ok
n1300=  button "Читать позже",13, 5 40 70 10, cancel
n1301=}
n1302=on 1:dialog:newmemo:sclick:12:{
n1303=  if ($dialog(memoservcenter) != memoservcenter) { dialog -mn memoservcenter memoservcenter }
n1304=  else { did -c memoservcenter 1 }
n1305=  .did -t memoservcenter 23
n1306=  .enable #MemoList | memoserv list
n1307=  .enable #MemoRead | memoserv read 1
n1308=}
